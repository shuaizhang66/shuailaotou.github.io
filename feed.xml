<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>å¼ å¸…åŒºå—é“¾åšå®¢</title>
    <description>å¼ å¸…ï¼Œæ±Ÿæ¹–äººç§°å¸…å“¥ï¼ŒåŒºå—é“¾æŠ€æœ¯å…¨èƒ½æŠ€æœ¯äººæ‰ã€‚</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 08 May 2018 22:35:08 +0800</pubDate>
    <lastBuildDate>Tue, 08 May 2018 22:35:08 +0800</lastBuildDate>
    <generator>Jekyll v3.5.1</generator>
    
      <item>
        <title>å¦‚ä½•åˆ›å»ºä¸€ä¸ªReacté¡¹ç›®ä»¥åŠå¦‚ä½•å®‰è£…ç¬¬ä¸‰æ–¹çš„åº“</title>
        <description>&lt;h2 id=&quot;åˆ›å»ºreacté¡¹ç›®&quot;&gt;åˆ›å»ºreacté¡¹ç›®&lt;/h2&gt;

&lt;h3 id=&quot;1é¦–å…ˆå®‰è£…npm&quot;&gt;1.é¦–å…ˆå®‰è£…npm&lt;/h3&gt;
&lt;p&gt;æˆ‘çš„Macæ˜¯ä½¿ç”¨brewå®‰è£…çš„
&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com/05-08-01.png&quot; alt=&quot;05-08-01.png&quot; /&gt;&lt;/p&gt;
&lt;h3 id=&quot;2ä½¿ç”¨npmå‘½ä»¤åˆ›å»ºapp&quot;&gt;2.ä½¿ç”¨npmå‘½ä»¤åˆ›å»ºapp&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;1.é¦–å…ˆåˆ›å»ºé¡¹ç›®æ–‡ä»¶ç›®å½•&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com/05-08-02.png&quot; alt=&quot;05-08-02.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2.ç„¶ååœ¨ä¸Šé¢åˆ›å»ºçš„æ–‡ä»¶ä¸‹æ‰§è¡Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;create-react-app  reactdemo&lt;/code&gt;ä»£ç &lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com/05-08-03.png&quot; alt=&quot;05-08-03.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;æ³¨æ„åˆ›å»ºçš„æ–‡ä»¶å¤¹çš„åå­—ä¸èƒ½å¤§å†™&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&quot;3ä½¿ç”¨atomæ‰“å¼€ä¸‹è½½å¥½çš„æ–‡ä»¶-atom-&quot;&gt;3.ä½¿ç”¨atomæ‰“å¼€ä¸‹è½½å¥½çš„æ–‡ä»¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;atom ./&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com//react05-08-04.png&quot; alt=&quot;05-08-04.png&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;4æ‰“å¼€ä¹‹åå°†é€‰ä¸­çš„æ–‡ä»¶åˆ é™¤&quot;&gt;4.æ‰“å¼€ä¹‹åå°†é€‰ä¸­çš„æ–‡ä»¶åˆ é™¤&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com/05-08-05.png&quot; alt=&quot;05-08-05.png&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;5å°†indexjsä¸­é€‰ä¸­çš„ä»£ç åˆ é™¤&quot;&gt;5.å°†index.jsä¸­é€‰ä¸­çš„ä»£ç åˆ é™¤&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com/05-08-06.png&quot; alt=&quot;05-08-06.png&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;6å°†indexjsä¸­é€‰ä¸­çš„ä»£ç æ”¹æˆ&quot;&gt;6.å°†index.jsä¸­é€‰ä¸­çš„ä»£ç æ”¹æˆ&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com/05-08-07.png&quot; alt=&quot;05-08-07.png&quot; /&gt;&lt;/p&gt;
&lt;h3 id=&quot;7ä½¿ç”¨ä»£ç npm-startå¯åŠ¨reactapp&quot;&gt;7.ä½¿ç”¨ä»£ç &lt;code class=&quot;highlighter-rouge&quot;&gt;npm start&lt;/code&gt;å¯åŠ¨reactapp&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com/05-08-08.png&quot; alt=&quot;05-08-08.png&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;8è¿è¡Œç»“æœ&quot;&gt;8.è¿è¡Œç»“æœ&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com/05-08-09.png&quot; alt=&quot;05-08-09.png&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;åˆ é™¤å®‰è£…ç¬¬ä¸‰æ–¹åŒ…&quot;&gt;åˆ é™¤å®‰è£…ç¬¬ä¸‰æ–¹åŒ…&lt;/h2&gt;

&lt;h3 id=&quot;1ä½¿ç”¨ä»£ç npm-uninstall-react-åˆ é™¤reactåŒ…&quot;&gt;1.ä½¿ç”¨ä»£ç &lt;code class=&quot;highlighter-rouge&quot;&gt;npm uninstall react&lt;/code&gt; åˆ é™¤reactåŒ…&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com//react05-08-10.png&quot; alt=&quot;05-08-10.png&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;1åŒç†ä½¿ç”¨ä»£ç npm-install-nebulas-å®‰è£…nebulasåŒ…&quot;&gt;1.åŒç†ä½¿ç”¨ä»£ç &lt;code class=&quot;highlighter-rouge&quot;&gt;npm install nebulas&lt;/code&gt; å®‰è£…nebulasåŒ…&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com/05-08-11.png&quot; alt=&quot;05-08-11.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å®‰è£…å¥½ä¹‹åå¯ä»¥åœ¨node_modulesä¸­æ‰¾åˆ°nebulasçš„åŒ…&lt;code class=&quot;highlighter-rouge&quot;&gt;nebulasä¸ºæ˜Ÿäº‘é“¾çš„åŒ…ï¼Œæ˜Ÿäº‘é“¾ä¸ºåŒºå—é“¾çš„å…¬é“¾ï¼Œå‡†å¤‡åœ¨ä¸Šé¢å¼€å‘dappï¼Œæœ‰å¥–åŠ±å“¦ğŸ‘»&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;æ®è¯´æ‰¾å·¥ä½œgithubçš„Starå¾ˆé‡è¦ï¼Œå“ˆå“ˆå“ˆã€‚å–œæ¬¢å°±starä¸€ä¸‹å§ï¼ğŸ‘»ğŸ‘»ğŸ‘»&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä½œè€…åŸåˆ›ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œå¦‚æœ‰é”™è¯¯æè¿°ï¼Œè¯·è¯„è®ºçº æ­£ï¼Œè°¢è°¢å¤§å®¶ï¼ğŸ³ğŸ³ğŸ³&lt;/p&gt;
&lt;/blockquote&gt;

</description>
        <pubDate>Thu, 03 May 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/05/03/%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAReact%E9%A1%B9%E7%9B%AE%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85%E7%AC%AC%E4%B8%89%E6%96%B9%E7%9A%84%E5%BA%93/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/05/03/%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAReact%E9%A1%B9%E7%9B%AE%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85%E7%AC%AC%E4%B8%89%E6%96%B9%E7%9A%84%E5%BA%93/</guid>
        
        <category>reacté¡¹ç›®</category>
        
        
      </item>
    
      <item>
        <title>goè¯­è¨€å®ç°äºŒå‰æœç´¢æ ‘</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;æ•´ç†ï¼šå¼ å¸… åšå®¢ : zhangshuai.ren&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;åŸºæœ¬æ¦‚å¿µä»‹ç»&quot;&gt;åŸºæœ¬æ¦‚å¿µä»‹ç»&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;æ ‘(tree)  :&lt;/strong&gt;    ä¸€ç§åˆ†å±‚çš„æ•°æ®ç»“æ„ï¼Œç±»æ¯”å®¶è°±&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;äºŒå‰æœç´¢æ ‘ï¼ˆbinary treeï¼‰ï¼š&lt;/strong&gt; å·¦èŠ‚ç‚¹çš„å€¼å‡å°äºæœ‰èŠ‚ç‚¹çš„äºŒå‰æ ‘&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;æ·±åº¦ï¼ˆdepthï¼‰ï¼š&lt;/strong&gt;ä» &lt;strong&gt;root&lt;/strong&gt;æ ¹ç»“ç‚¹åˆ°å½“å‰èŠ‚ç‚¹å”¯ä¸€è·¯å¾„çš„é•¿åº¦&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;é«˜åº¦ï¼ˆheightï¼‰ï¼š&lt;/strong&gt;ä»å½“å‰èŠ‚ç‚¹åˆ°ä¸€ç‰‡æ ‘å¶æœ€é•¿çš„è·¯å¾„çš„é•¿åº¦&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;æ ¹ï¼ˆrootï¼‰ï¼š&lt;/strong&gt;æ·±åº¦ä¸º0çš„æ ‘èŠ‚ç‚¹&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;å†…éƒ¨èŠ‚ç‚¹ï¼ˆinternal nodeï¼‰ï¼š&lt;/strong&gt;è‡³å°‘æœ‰ä¸€ä¸ªå­—èŠ‚ç‚¹çš„èŠ‚ç‚¹&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;æ ‘å¶èŠ‚ç‚¹ï¼ˆleafï¼‰ï¼š&lt;/strong&gt;æ— å­—èŠ‚ç‚¹çš„èŠ‚ç‚¹&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;å…„å¼ŸèŠ‚ç‚¹ï¼ˆsiblingï¼‰&lt;/strong&gt;ï¼šæ‹¥æœ‰ç›¸åŒçˆ¶èŠ‚ç‚¹çš„å­—èŠ‚ç‚¹æ³¢ã€&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com/1-1.png&quot; alt=&quot;1-1&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;åº”ç”¨&quot;&gt;åº”ç”¨&lt;/h3&gt;
&lt;p&gt;æ–‡ä»¶ç³»ç»Ÿå’Œæ•°æ®åº“ç³»ç»Ÿä¸€èˆ¬éƒ½é‡‡ç”¨æ ‘ï¼ˆç‰¹åˆ«æ˜¯Bæ ‘ï¼‰çš„æ•°æ®ç»“æ„æ•°æ®ï¼Œä¸»è¦ä¸ºæ’åºå’Œæ£€ç´¢çš„æ•ˆç‡ã€‚äºŒå‰æ ‘æ˜¯ä¸€ç§æœ€åŸºæœ¬æœ€å…¸å‹çš„æ’åºæ ‘ï¼Œå¯¹äºå­¦ä¹ å’Œç ”ç©¶æ ‘çš„ç‰¹æ€§ï¼Œä½†æ˜¯æœ¬èº«å¾ˆå°‘åœ¨å®é™…ä¸­è¿›è¡Œåº”ç”¨ã€‚å°±åƒå†’æ³¡æ’åºä¸€æ ·ï¼ŒäºŒå‰æ ‘å› ä¸ºæ•ˆç‡é—®é¢˜å¹¶ä¸å®ç”¨ã€‚&lt;/p&gt;

&lt;h3 id=&quot;äºŒå‰æ ‘çš„å¸¸ç”¨æ“ä½œ&quot;&gt;äºŒå‰æ ‘çš„å¸¸ç”¨æ“ä½œ&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt; Insertï¼ˆvï¼‰ //å‘äºŒå‰æ ‘çš„åˆé€‚ä½ç½®æ’å…¥èŠ‚ç‚¹&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Remove(v). // ç§»é™¤æ ‘ä¸­æ‰€æœ‰å€¼ä¸ºvçš„èŠ‚ç‚¹&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Search(v)   //æ£€æŸ¥å€¼ä¸ºvçš„å…ƒç´ æ˜¯å¦åœ¨æ ‘ä¸­&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Min().    //è·å–äºŒå‰æ ‘ä¸­æœ€å°çš„å€¼&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Max()     //è·å–äºŒå‰æ ‘ä¸­æœ€å¤§çš„å€¼&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;InOrderTraverse()  //ä¸­åºéå†æ ‘&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;PreOrderTraverse()  //å…ˆåºéå†æ ‘&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;PostOrderTraverse() //ååºéå†æ ‘&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;String()     //åœ¨å‘½ä»¤è¡Œæ ¼å¼åŒ–æ‰“å°å‡ºäºŒå‰æ ‘&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åŒæ ·é€‚ç”¨gennyæä¾›ä»£ç çš„å¤ç”¨æ€§ï¼Œæ ‘ç±»å‹å‘½åä¸ºï¼šItemBinarySearchTree,æ ‘èŠ‚ç‚¹çš„ç»“æ„ä½“å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;åœ¨å‘½ä»¤ç«¯ä½¿ç”¨ 
go get &quot;github.com/cheekybits/genny/generic&quot; 
å‘½ä»¤è·å–è¿™ä¸ªåŒ…

import (
    &quot;fmt&quot;
    &quot;sync&quot;

    &quot;github.com/cheekybits/genny/generic&quot;  
)


type Item generic.Type   //generic.Type ä¸º&quot;github.com/cheekybits/genny/generic&quot;è¿™ä¸ªåŒ…ä¸‹é¢çš„ä¸€ä¸ªç©ºæ¥å£ç±»å‹ï¼Œtypeä¸ºgeneric.Typeèµ·åˆ«åä¸ºItem

type Node struct{
    key        int    //ä¸­åºéå†çš„èŠ‚ç‚¹åºå·
    value      Item   //èŠ‚ç‚¹å­˜å‚¨çš„å€¼
    left       *Node  //å·¦èŠ‚ç‚¹
    right      *Node   //å³é¢èŠ‚ç‚¹
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;æ’å…¥æ“ä½œä¸éå†&quot;&gt;æ’å…¥æ“ä½œä¸éå†&lt;/h3&gt;
&lt;p&gt;æ’å…¥æ“ä½œéœ€è¦ä½¿ç”¨åˆ°é€’å½’ï¼Œæ’å…¥æ“ä½œéœ€è¦ä»ä¸Šåˆ°ä¸‹çš„æŸ¥æ‰¾æ–°èŠ‚ç‚¹åœ¨æ ‘ä¸­åˆé€‚çš„ä½ç½®ï¼Œæ–°èŠ‚ç‚¹çš„å€¼å°äºä»»æ„èŠ‚ç‚¹ï¼Œåˆ™å‘å·¦å­æ ‘ç»§ç»­å¯»æ‰¾ï¼ŒåŒç†å‘å³å­æ ‘å¯»æ‰¾ï¼Œç›´åˆ°æ ‘å¶èŠ‚ç‚¹å†æ’å…¥ã€‚&lt;/p&gt;

&lt;p&gt;éå†æ“ä½œæœ‰ä¸‰ç§æ–¹å¼ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;ä¸­åºéå†ô±´ô±¿ô²¸ô²¹ô°(in-orderô°‚ô°ƒô°Ÿô°œô°€)ï¼š&lt;/strong&gt;å·¦å­æ ‘ï¼ˆLï¼‰â€“&amp;gt;æ ¹èŠ‚ç‚¹ô°¨ô°‹ô°—(D)â€“&amp;gt;å³æ ‘(Rô°¤)ô°€ô°ƒ 1-&amp;gt;2-&amp;gt;3-&amp;gt;4-&amp;gt;5-&amp;gt;6-&amp;gt;7-&amp;gt;8-&amp;gt;9-&amp;gt;10- &amp;gt;11 ï¼ˆLDRï¼‰&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;å…ˆåºéå†ï¼ˆpre-orderï¼‰ï¼š&lt;/strong&gt;æ ¹èŠ‚ç‚¹ô°‚ô°ƒô°¨ô°‹ô°—(D)â€“&amp;gt;ô°Ÿô°œô°€å·¦å­æ ‘(L)â€“&amp;gt;ô°¤ô°œô°€ô°ƒå³æ ‘(R) 8-&amp;gt;4-&amp;gt;2-&amp;gt;1-&amp;gt;3-&amp;gt;6-&amp;gt;5-&amp;gt;7 &amp;gt;10-&amp;gt;9- &amp;gt;11ï¼ˆDLRï¼‰&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;ååºéå†ï¼ˆpre-orderï¼‰ï¼š&lt;/strong&gt;å·¦å­æ ‘ô°‚ô°ƒô°¨ô°‹ô°—(L)â€“&amp;gt;ô°Ÿô°œô°€å³å­æ ‘(R)â€“&amp;gt;æ ¹èŠ‚ç‚¹ï¼ˆDï¼‰ 8-&amp;gt;4-&amp;gt;2-&amp;gt;1-&amp;gt;3-&amp;gt;6-&amp;gt;5-&amp;gt;7 &amp;gt;10-&amp;gt;9- &amp;gt;11 ï¼ˆLRDï¼‰&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;æ ¹æ®æ ¹èŠ‚ç‚¹çš„ä½ç½®æ¥çœ‹æ˜¯ä»€ä¹ˆåºåˆ—éå†&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com/1-2.png&quot; alt=&quot;1-2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;String()&lt;/code&gt; å¯è§†åŒ–æ ‘ç»“æ„&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com/1-3.png&quot; alt=&quot;1-3&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;ä»£ç å®ç°&quot;&gt;ä»£ç å®ç°&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Insert&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//å‘äºŒå‰æ ‘åˆé€‚çš„ä½ç½®æ’å…¥èŠ‚ç‚¹
func (tree *ItemBinarySearchTree) Insert(key int, value Item) {

//ä¸ºäº†ç¡®ä¿æ“ä½œäºŒå‰æ ‘çš„æ•°æ®å®‰å…¨ï¼Œå¯¹æ•°æ®æ“ä½œè¿›è¡Œè¯»å†™ä¸Šé”
	tree.lock.Lock()
	defer tree.lock.Unlock()
	newNode := &amp;amp;Node{key, value, nil, nil}
//å¦‚æœå½“å‰çš„æ ‘ä¸ºç©ºï¼Œé‚£ä¹ˆæ’å…¥çš„èŠ‚ç‚¹ä½œä¸ºæ ¹èŠ‚ç‚¹
	if tree.root == nil {
		tree.root = newNode
	} else {
	//è°ƒç”¨ä¸‹é¢çš„æ’å…¥å‡½æ•°ï¼Œå¦èµ·ä¸€ä¸ªæ–¹æ³•ğŸ‘‡
		insertNode(tree.root, newNode)
	}

}

//æ‰¾åˆ°åˆé€‚çš„ä½ç½®
func insertNode(node, newNode *Node) {

//å½“æ–°èŠ‚ç‚¹çš„å€¼å°äºèŠ‚ç‚¹çš„å€¼çš„æ—¶å€™ï¼Œåº”è¯¥æ’å…¥åˆ°èŠ‚ç‚¹çš„å·¦ä¾§
	if newNode.key &amp;lt; node.key {
	//å¦‚æœæ—§èŠ‚ç‚¹å·¦ä¾§æ²¡æœ‰èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæ—§èŠ‚ç‚¹ç›´æ¥èµ‹å€¼æ–°èŠ‚ç‚¹
		if node.left == nil {
			node.left = newNode
		} else {
		//å¦åˆ™å°†å·¦èŠ‚ç‚¹ä½œä¸ºè€èŠ‚ç‚¹ï¼Œç»§ç»­å¯»æ‰¾å·¦èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹
			insertNode(node.left, newNode)
		}
	} else {
	//ä¸ä¸Šé¢åŒç†
		if node.right == nil {
			node.right = newNode
		} else {
			insertNode(node.right, newNode)
		}
	}

}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Search&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//æ£€æŸ¥keyçš„å…ƒç´ æ˜¯å¦å­˜åœ¨
func (tree *ItemBinarySearchTree) Search(key int) bool {

	tree.lock.Lock()
	defer tree.lock.Unlock()
	return search(tree.root, key)

}
func search(node *Node, key int) bool {

	if node == nil {
		return false
	}
  //å¦‚æœkeyçš„å€¼å°äºèŠ‚ç‚¹çš„å€¼ï¼Œé‚£ä¹ˆåº”è¯¥æ’å…¥åˆ°å·¦å­æ ‘
	if key &amp;lt; node.key {
	//å°†å·¦å­æ ‘ä½œä¸ºæ–°èŠ‚ç‚¹ï¼Œç»§ç»­æŸ¥è¯¢
		return search(node.left, key)
	}
	
	// å¦‚æœkeyçš„å€¼å¤§äºèŠ‚ç‚¹çš„å€¼ï¼Œé‚£ä¹ˆåº”è¯¥æ’å…¥å³å­æ ‘
	if key &amp;gt; node.key {
	//å°†å³å­æ ‘ä½œä¸ºæ–°èŠ‚ç‚¹ï¼Œç»§ç»­æŸ¥è¯¢
		return search(node.right, key)
	}

//å¦‚æœå½“å‰keyçš„å€¼==node.key è¿”å›true
	return true

}


&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Remove&lt;/strong&gt;&lt;/p&gt;
&lt;h5 id=&quot;åˆ é™¤èŠ‚ç‚¹çš„æµç¨‹&quot;&gt;åˆ é™¤èŠ‚ç‚¹çš„æµç¨‹&lt;/h5&gt;

&lt;p&gt;å…ˆé€’å½’æŸ¥æ‰¾ï¼Œå†åˆ é™¤èŠ‚ç‚¹ã€‚ä½†æ˜¯åœ¨åˆ é™¤æ—¶éœ€è¦æ ¹æ®èŠ‚ç‚¹æ‹¥æœ‰å­èŠ‚ç‚¹çš„æ•°é‡ï¼Œåˆ†å¦‚ä¸‹3ä¸­æƒ…å†µï¼š
&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com/1-4.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;h4 id=&quot;ä»£ç å®ç°-1&quot;&gt;ä»£ç å®ç°&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
func (tree *ItemBinarySearchTree) remove(key int) {

	tree.lock.Lock()
	defer tree.lock.Unlock()
	remove(tree.root, key)
	
}

func remove(node *Node, key int) *Node {
	if node == nil {
		return nil
	}
	
   // å¦‚æœkey&amp;lt; node.key åˆ™å‘å·¦å¯»æ‰¾
	
	if key &amp;lt; node.key {
	
		// å°†å·¦èŠ‚ç‚¹ä½œä¸ºæ–°èŠ‚ç‚¹é€’å½’ç»§ç»­å¯»æ‰¾
		
		node.left = remove(node.left, key)
		return node
	}

	// å¦‚æœkey&amp;gt; node.key åˆ™å‘å³å¯»æ‰¾

	if key &amp;gt; node.key {
	
	// å°†å³èŠ‚ç‚¹ä½œä¸ºæ–°èŠ‚ç‚¹é€’å½’ç»§ç»­å¯»æ‰¾
	
		node.right = remove(node.right, key)
		return node
	}

//å¦‚æœkey==node.key åˆ¤æ–­nodeæœ‰æ²¡æœ‰å·¦å³å­æ ‘ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ç›´æ¥åˆ é™¤
	if node.left == nil &amp;amp;&amp;amp; node.right == nil {

		node = nil
		return node
	}
//å¦‚æœkey==node.key åˆ¤æ–­nodeæœ‰æ²¡æœ‰å·¦å³å­æ ‘ï¼Œå¦‚æœæœ‰å³å­æ ‘ï¼Œåˆ™å°†å³å­æ ‘ç›´æ¥èµ‹å€¼ç»™å½“å‰èŠ‚ç‚¹ï¼Œå®Œæˆè¦†ç›–åˆ é™¤
	if node.left == nil {
		node = node.right
		return node
	}
	
	//å¦‚æœkey==node.key åˆ¤æ–­nodeæœ‰æ²¡æœ‰å·¦å³å­æ ‘ï¼Œå¦‚æœæœ‰å³å­æ ‘ï¼Œåˆ™å°†å³å­æ ‘ç›´æ¥èµ‹å€¼ç»™å½“å‰èŠ‚ç‚¹ï¼Œå®Œæˆè¦†ç›–åˆ é™¤
	
	if node.right == nil {
		node = node.left
		return node
	}

	mostLeftMode := node.right
// è¦åˆ é™¤çš„èŠ‚ç‚¹æœ‰2ä¸ªå­—èŠ‚ç‚¹ï¼Œæ‰¾åˆ°å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹ï¼Œæ›¿æ¢å½“å‰èŠ‚ç‚¹ô±šô±ô²ô°ˆô°–ô°—ô°› 
	for {
	
	//ä¸€ç›´éå†æ‰¾åˆ°æœ€å·¦èŠ‚ç‚¹
		if mostLeftMode != nil &amp;amp;&amp;amp; mostLeftMode.left != nil {
			mostLeftMode = mostLeftMode.left
		} else {
			break
		}

	}

// ä½¿ç”¨å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹æ›¿æ¢å½“å‰çš„èŠ‚ç‚¹ï¼Œå³åˆ é™¤å½“å‰èŠ‚ç‚¹
	node.key, node.value = mostLeftMode.key,mostLeftMode.value

	node.right = remove(node.right, node.key)

	return node

}


&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Max&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//è·å–æœ€å¤§èŠ‚ç‚¹å³ä¸ºäºŒå‰æ ‘æœ€å³èŠ‚ç‚¹ï¼Œæ ¹æ®äºŒå‰æ ‘çš„æ€§è´¨

func (tree *ItemBinarySearchTree) Max() *Item {

	tree.lock.Lock()
	defer tree.lock.Unlock()
	node := tree.root
	if node == nil {
		return nil
	}
	for {

		if node.right == nil {
			return &amp;amp;node.value
		}

		node = node.right
	}

}

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Min&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-'&quot;&gt;
// æ ¹æ®äºŒå‰æ ‘çš„æ€§è´¨,è·å–æœ€å¤§èŠ‚ç‚¹å³ä¸ºäºŒå‰æ ‘æœ€å³èŠ‚ç‚¹

func (tree *ItemBinarySearchTree) Min() *Item {

	tree.lock.Lock()
	defer tree.lock.Unlock()

	node := tree.root

	if node == nil {
		return nil
	}

	for {
		if node.left == nil {
			return &amp;amp;node.value
		} else {
			node = node.left
		}

	}

}

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Traverse&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
// å…ˆåºéå†ï¼šæ ¹èŠ‚ç‚¹ -&amp;gt; å·¦å­æ ‘ -&amp;gt;å³å­æ ‘
func (tree *ItemBinarySearchTree) PreOrderTraverse(printFunc func(Item)) {

	tree.lock.Lock()
	defer tree.lock.Unlock()
	
	preOrderTraverse(tree.root, printFunc)

}

func preOrderTraverse(node *Node, printFunc func(Item)) {

	if node != nil {
	//å…ˆæ‰“å°æ ¹èŠ‚ç‚¹
		printFunc(node.value)
		
		//ç„¶åé€’å½’è°ƒç”¨è‡ªå·±ï¼Œå°†å·¦èŠ‚ç‚¹ä½œä¸ºæ–°èŠ‚ç‚¹ï¼Œæ‰“å°
		preOrderTraverse(node.left, printFunc)
		//ç„¶åé€’å½’è°ƒç”¨è‡ªå·±ï¼Œå°†å³èŠ‚ç‚¹ä½œä¸ºæ–°èŠ‚ç‚¹ï¼Œæ‰“å°
		preOrderTraverse(node.right, printFunc)

	}

}

// ä¸­åºéå†ï¼š å·¦å­æ ‘ -&amp;gt;æ ¹èŠ‚ç‚¹ -&amp;gt;å³å­æ ‘
func (tree *ItemBinarySearchTree) PostOrderTraverse(printFunc func(Item)) {

	tree.lock.Lock()
	defer tree.lock.Unlock()

	postOrderTraverse(tree.root, printFunc)

}

func postOrderTraverse(node *Node, printFunc func(Item)) {

	if node != nil {
    //é€’å½’è°ƒç”¨è‡ªå·±ï¼Œå°†å·¦èŠ‚ç‚¹ä½œä¸ºæ–°èŠ‚ç‚¹ï¼Œæ‰“å°
		preOrderTraverse(node.left, printFunc)
		//æ‰“å°æ ¹èŠ‚ç‚¹
		printFunc(node.value)
		//é€’å½’è°ƒç”¨è‡ªå·±ï¼Œå°†å³èŠ‚ç‚¹ä½œä¸ºæ–°èŠ‚ç‚¹ï¼Œæ‰“å°
		preOrderTraverse(node.right, printFunc)

	}

}


// ååºéå†ï¼š å·¦å­æ ‘  -&amp;gt;å³å­æ ‘-&amp;gt;æ ¹èŠ‚ç‚¹

func (tree *ItemBinarySearchTree) InOrderTraverse(printFunc func(Item)) {

	tree.lock.Lock()
	defer tree.lock.Unlock()

	inOrderTraverse(tree.root, printFunc)

}

func inOrderTraverse(node *Node, printFunc func(Item)) {

	if node != nil {
     //é€’å½’è°ƒç”¨è‡ªå·±ï¼Œå°†å·¦èŠ‚ç‚¹ä½œä¸ºæ–°èŠ‚ç‚¹ï¼Œæ‰“å°
		preOrderTraverse(node.left, printFunc)
		//é€’å½’è°ƒç”¨è‡ªå·±ï¼Œå°†å³èŠ‚ç‚¹ä½œä¸ºæ–°èŠ‚ç‚¹ï¼Œæ‰“å°
		preOrderTraverse(node.right, printFunc)
		//æ‰“å°æ ¹èŠ‚ç‚¹
		printFunc(node.value)

	}

}

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;String&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
//ååºéå†æ‰“å°æ ‘çš„ç»“æ„
func (tree *ItemBinarySearchTree) String() {
	tree.lock.Lock()
	defer tree.lock.Unlock()
	if tree.root == nil {
		println(&quot;Tree is empty&quot;)
		return
	}
	stringify(tree.root, 0)
	println(&quot;----------------------------&quot;)
}
func stringify(node *Node, level int) {
	if node == nil {
		return
	}
	format := &quot;&quot;
	for i := 0; i &amp;lt; level; i++ {
		format += &quot;\t&quot; //æ ¹æ®èŠ‚ç‚¹çš„æ·±åº¦å†³å®šç¼©è¿›é•¿åº¦

	}
	format += &quot;----[ &quot;
	level++
	//å…ˆé€’å½’æ‰“å°å·¦å­æ ‘ô±ˆô±‰ô±Šô±‹ô±Œô°Ÿô°œô°€ 
	stringify(node.left, level)
	//æ‰“å°å€¼
	fmt.Printf(format+&quot;%d\n&quot;, node.key) 
	//å†é€’å½’æ‰“å°å³å­æ ‘
	 stringify(node.right, level)
}

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;å¯¹äºäºŒå‰æ ‘çš„æ“ä½œï¼Œå¢åˆ æŸ¥éƒ½ä¸é€’å½’ç›¸å…³ï¼Œæ‰€ä»¥å®ç°çš„æ—¶å€™ä¸€å®šè¦åˆ†ææ¸…æ¥šé€’å½’çš„ç»ˆæ­¢æ¡ä»¶ï¼Œåœ¨æ­£ç¡®çš„æ¡ä»¶ä¸‹returnï¼Œé¿å¼€æ­»å¾ªç¯ã€‚&lt;/strong&gt;&lt;/p&gt;

</description>
        <pubDate>Thu, 03 May 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/05/03/go%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/05/03/go%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/</guid>
        
        <category>äºŒå‰æ ‘</category>
        
        
      </item>
    
      <item>
        <title>Goè¯­è¨€ç®€å•å®ç°æ¯”ç‰¹å¸æŒ–çŸ¿åŸç†</title>
        <description>&lt;h3 id=&quot;åŒºå—é“¾åŸºæœ¬æ¦‚å¿µ&quot;&gt;åŒºå—é“¾åŸºæœ¬æ¦‚å¿µ&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;åŒºå—é“¾&lt;/code&gt;æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯¹ç­‰ç½‘ç»œï¼ˆpeer-to-peerï¼‰çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;åˆ†å¸ƒå¼è´¦æœ¬æ•°æ®åº“&lt;/code&gt;ï¼Œ
æ¯”ç‰¹å¸çš„åº•å±‚å°±é‡‡ç”¨äº†åŒºå—é“¾çš„æŠ€æœ¯æ¶æ„ã€‚åŒºå—é“¾æœ¬èº«å…¶å®æ˜¯ä¸€ä¸²é“¾æ¥çš„æ•°æ®åŒºå—ï¼Œæ¯ç›¸é‚»åŒºå—ä¹‹é—´ç›¸äº’è¿æ¥ï¼Œå…¶é“¾æ¥æŒ‡é’ˆæ˜¯é‡‡ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;å¯†ç å­¦å“ˆå¸Œç®—æ³•&lt;/code&gt;å¯¹åŒºå—å¤´è¿›è¡Œå¤„ç†æ‰€äº§ç”Ÿçš„åŒºå—å¤´å“ˆå¸Œå€¼ã€‚æ¯ä¸€ä¸ªåŒºå—æ•°æ®å—ä¸­è®°å½•äº†ä¸€ç»„é‡‡ç”¨å“ˆå¸Œç®—æ³•ç»„æˆçš„æ ‘çŠ¶äº¤æ˜“çŠ¶æ€ä¿¡æ¯ï¼Œè¿™æ ·ä¿è¯äº†&lt;code class=&quot;highlighter-rouge&quot;&gt;æ¯ä¸ªåŒºå—å†…çš„äº¤æ˜“æ•°æ®ä¸å¯ç¯¡æ”¹ï¼ŒåŒºå—é“¾é‡Œé“¾æ¥çš„åŒºå—ä¹Ÿä¸å¯ç¯¡æ”¹&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ¯”ç‰¹å¸çš„äº¤æ˜“è®°å½•ä¼šä¿å­˜åœ¨æ•°æ®åŒºå—ä¸­ï¼Œæ¯”ç‰¹å¸ç³»ç»Ÿä¸­å¤§çº¦æ¯10åˆ†é’Ÿä¼šäº§ç”Ÿä¸€ä¸ªåŒºå—ï¼Œæ¯ä¸ªæ•°æ®åŒºå—ä¸€èˆ¬åŒ…å«åŒºå—å¤´ï¼ˆHeaderï¼‰å’ŒåŒºå—ä½“ï¼ˆBodyï¼‰ä¸¤éƒ¨åˆ†ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com/4-27-1-1.jpg&quot; alt=&quot;1-1.jpg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åŒºå—å¤´å°è£…äº†å½“å‰çš„ç‰ˆæœ¬å·ï¼ˆVersionï¼‰ã€å‰ä¸€åŒºå—åœ°å€ï¼ˆPrev-Blockï¼‰ã€æ—¶é—´æˆ³ï¼ˆTimestampï¼‰ã€éšæœºæ•°ï¼ˆNonceï¼‰ã€å½“å‰ åŒºå—çš„ç›®æ ‡å“ˆå¸Œå€¼ï¼ˆBitsï¼‰ã€Merkleæ•°çš„æ ¹å€¼ï¼ˆMerkle-rootï¼‰ç­‰ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;h4 id=&quot;åŒºå—å¤´åˆ†æ&quot;&gt;åŒºå—å¤´åˆ†æ&lt;/h4&gt;
&lt;p&gt;å‰80ä¸ªå­—èŠ‚æ˜¯åŒºå—å¤´&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;hash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;000000000003ba27aa200b1cecaad478d2b00432346c3f1f3986da1afd33e506&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;ver&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;prev_block&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;000000000002d01c1fccc21636b607dfd930d31d01c3a62104612a1719011250&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;mrkl_root&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;f3e94742aca4b5ef85488dc37c06c3282295ffec960994b2c0d5ac2a25a95766&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;time&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1293623863&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;bits&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;453281356&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;nonce&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;274148111&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;å­—èŠ‚&lt;/th&gt;
      &lt;th&gt;å­—æ®µ&lt;/th&gt;
      &lt;th&gt;è¯´æ˜&lt;/th&gt;
      &lt;th&gt;Â &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Â &lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;ç‰ˆæœ¬&lt;/td&gt;
      &lt;td&gt;åŒºå—ç‰ˆæœ¬å·ï¼Œè¡¨ç¤ºåŒºå—éµå®ˆçš„éªŒè¯è§„åˆ™&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Â &lt;/td&gt;
      &lt;td&gt;32&lt;/td&gt;
      &lt;td&gt;çˆ¶åŒºå—å¤´å“ˆå¸Œå€¼&lt;/td&gt;
      &lt;td&gt;å‰ä¸€åŒºå—çš„å“ˆå¸Œå€¼ï¼Œä½¿ç”¨SHA(SHA256(çˆ¶åŒºå—å¤´))è®¡ç®—&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Â &lt;/td&gt;
      &lt;td&gt;32&lt;/td&gt;
      &lt;td&gt;Merkleæ ¹&lt;/td&gt;
      &lt;td&gt;è¯¥åŒºå—ä¸­äº¤æ˜“çš„Merkleæ ‘æ ¹çš„å“ˆå¸Œå€¼ï¼Œ&lt;br /&gt;åŒæ ·é‡‡ç”¨SHA(SHA256(çˆ¶åŒºå—å¤´))è®¡ç®—&amp;lt;/br&amp;gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Â &lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;æ—¶é—´æˆ³&lt;/td&gt;
      &lt;td&gt;è¯¥åŒºå—äº§ç”Ÿçš„è¿‘ä¼¼æ—¶é—´ï¼Œç²¾ç¡®åˆ°ç§’çš„UNIXæ—¶é—´æˆ³ï¼Œ&lt;br /&gt;å¿…é¡»ä¸¥æ ¼å¤§äºå‰11ä¸ªåŒºå—æ—¶é—´çš„ä¸­å€¼&amp;lt;/br&amp;gt;ï¼Œ&lt;br /&gt;åŒæ—¶å…¨èŠ‚ç‚¹ä¹Ÿä¼šæ‹’ç»é‚£äº›è¶…å‡ºè‡ªå·±2ä¸ªå°æ—¶æ—¶é—´æˆ³çš„åŒºå—&amp;lt;/br&amp;gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Â &lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;éš¾åº¦ç›®æ ‡&lt;/td&gt;
      &lt;td&gt;è¯¥åŒºå—å·¥ä½œé‡ç®—æ³•çš„éš¾åº¦ç›®æ ‡ï¼Œå·²ç»ä½¿ç”¨ç‰¹å®šç®—æ³•ç¼–ç &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Â &lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;Nonce&lt;/td&gt;
      &lt;td&gt;ä¸ºäº†æ‰¾åˆ°æ»¡è¶³éš¾åº¦ç›®æ ‡æ‰€è®¾å®šçš„éšæœºæ•°ï¼Œ&lt;br /&gt;ä¸ºäº†è§£å†³32ä½éšæœºæ•°åœ¨ç®—åŠ›é£å‡çš„æƒ…å†µä¸‹ä¸å¤Ÿç”¨çš„é—®é¢˜ï¼Œ&amp;lt;/br&amp;gt;è§„å®šæ—¶é—´æˆ³å’Œcoinbaseäº¤æ˜“ä¿¡æ¯å‡å¯æ›´æ”¹ï¼Œä»¥æ­¤æ‰©å±•nonceçš„ä½æ•°&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;æŒ–çŸ¿&quot;&gt;æŒ–çŸ¿&lt;/h3&gt;
&lt;p&gt;åŒºå—åœ¨æŒ–çŸ¿è¿‡ç¨‹ä¸­äº§ç”Ÿã€‚æ‰€è°“çš„æŒ–çŸ¿å®é™…ä¸Šæ˜¯&lt;code class=&quot;highlighter-rouge&quot;&gt;ç©·ä¸¾éšæœºæ•°çš„ç®—æ³•&lt;/code&gt;ï¼ŒæŠŠä¸Šä¸ªåŒºå—çš„å“ˆå¸Œå€¼åŠ ä¸Šååˆ†é’Ÿå†…çš„å…¨éƒ¨äº¤æ˜“å•æ‰“åŒ…ï¼Œå†åŠ ä¸Šä¸€ä¸ªç®—è®¡æ•°ï¼Œç®—å‡ºä¸€ä¸ª256ä½çš„å­—ç¬¦ä¸²å“ˆå¸Œå€¼ï¼Œè¾“å…¥çš„éšæœºæ•°Nonce ä½¿å“ˆå¸Œå€¼æ»¡è¶³ä¸€å®šçš„æ¡ä»¶å°±è·å¾—è¿™ä¸ªåŒºå—çš„äº¤æ˜“è®°è´¦æƒã€‚æ–°äº§ç”Ÿçš„åŒºå—éœ€è¦&lt;code class=&quot;highlighter-rouge&quot;&gt;å¿«é€Ÿçš„å¹¿æ’­å‡ºå»&lt;/code&gt;ï¼Œä»¥ä¾¿å…¶ä»–çš„èŠ‚ç‚¹å¯¹å…¶è¿›è¡ŒéªŒè¯ï¼Œä»¥é˜²æ­¢é€ å‡ã€‚å½“è®°è´¦æˆåŠŸçš„æ—¶å€™ï¼Œå³è·å¾—åŒºå—å¥–åŠ±ï¼Œä¹Ÿå°±æ˜¯æŒ–åˆ°äº†æ¯”ç‰¹å¸ã€‚&lt;/p&gt;

&lt;h3 id=&quot;è·å¾—æ¯”ç‰¹å¸&quot;&gt;è·å¾—æ¯”ç‰¹å¸&lt;/h3&gt;
&lt;p&gt;éšç€éšæœºæ•°ï¼ˆNonceï¼‰çš„ä¸æ–­å˜åŒ–ï¼Œå°±ä¼šäº§ç”Ÿä¸åŒçš„å“ˆå¸Œå€¼ï¼Œå½“äº§ç”Ÿçš„&lt;code class=&quot;highlighter-rouge&quot;&gt;å“ˆå¸Œå€¼å·¦é¢çš„è¿ç»­ä½æ•°çš„0å€¼ä¸ªæ•°å¤§äºç­‰äºå½“å‰åŒºå—éš¾åº¦å€¼çš„æ—¶å€™&lt;/code&gt;ï¼Œå³ç¢°æ’æˆåŠŸï¼Œæ‰¾åˆ°éšæœºæ•°ï¼Œè·å¾—è®°è´¦æƒï¼Œè·å¾—æ¯”ç‰¹å¸ã€‚å¦‚ä¸‹å›¾ï¼š
&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com/4-27-1-2.png&quot; alt=&quot;1-2.png&quot; /&gt;
è¿™ä¸ªéš¾åº¦ä¸º4ï¼Œç¢°æ’å‡ºçš„éšæœºæ•°æ˜¯87471.éšç€éš¾åº¦çš„ä¸æ–­æé«˜ï¼Œç¢°æ’å‡ºéšæœºæ•°çš„æ¦‚ç‡å°±è¶Šä½ã€‚ç›®å‰æ¯”ç‰¹å¸çŸ¿æœºæœ€å¤§çš„ç®—åŠ›ä¸ºèš‚èšå¤§é™†çš„S9çŸ¿æœºï¼ˆ14TH/sï¼‰ã€‚æˆ‘å°±æœ‰ä¸¤å°å“¦ï¼Œä¸è¿‡ç°åœ¨æ¯å¤©çš„äº§é‡åªæœ‰0.0009ä¸ªBTCï¼Œå°‘çš„å¯æ€œã€‚ã€‚ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä»£ç å®ç°&quot;&gt;ä»£ç å®ç°&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;å®šä¹‰blockç»“æ„ä½“&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
type block struct {

	ver       int   //ç‰ˆæœ¬å·
	prev_block string  //çˆ¶åŒºå—çš„å“ˆå¸Œå€¼
	mekl_root  string   //è¯¥åŒºå—merkleæ ‘çš„å“ˆå¸Œå€¼
	time       string   //æ—¶é—´æˆ³
	bits       int      // éš¾åº¦

}

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è·å–å“ˆå¸Œå€¼&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
func getHashValueStr(nonce int,blc block) string {

//æ‹¼æ¥åŒºå—ç‰ˆæœ¬å·ï¼Œæ—¶é—´æˆ³ï¼Œçˆ¶åŒºå—ï¼Œmerkleæ ‘ï¼Œéšæœºæ•°ä¸ºhvå­—ç¬¦ä¸²
	hv := strconv.Itoa(blc.ver) + blc.time + blc.prev_block+
		blc.mekl_root + strconv.Itoa(nonce)

	first := sha256.New()

	first.Write([]byte(hv))

// first.Sum(nil)è¿”å›å€¼ä¸º[]byte ç±»å‹çš„æ•°ç»„ï¼Œ
 è€Œå“ˆå¸Œå€¼ç”±æ¯ä½å­—ç¬¦16è¿›åˆ¶å­—ç¬¦ç»„æˆï¼Œæ‰€ä»¥åº”ç”¨fmt.Springtf
 å‡½æ•°å°†æ•°ç»„è½¬åŒ–ä¸ºå•ä¸ªå­—èŠ‚ä¸º16è¿›åˆ¶æ‹¼æ¥è€Œæˆçš„å“ˆå¸Œå­—ç¬¦ä¸²

	return fmt.Sprintf(&quot;%x&quot;,first.Sum(nil))

}

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;æ£€éªŒéšæœºæ•°ç”Ÿäº§çš„å“ˆå¸Œå‡½æ•°æ˜¯å¦ç¬¦åˆæ¡ä»¶&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;

func mining(hashStr string, diff int) bool {

	var i int

	for i = 0; i &amp;lt; len(hashStr); i++ {

      //å¦‚æœiä½æ•° çš„å€¼ä¸ä¸º0ï¼Œä¸æ»¡è¶³æ¡ä»¶ï¼Œè·³å‡ºå¾ªç¯
		if hashStr[i] != '0' {
			break
		}
	}
	//åˆ¤æ–­içš„å€¼æ˜¯å¦å¤§äºå½“å‰çš„éš¾åº¦ï¼Œå¤§äºç¢°æ’æˆåŠŸï¼Œå¦åˆ™å¤±è´¥
	return i &amp;gt;= diff

}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è·å–éšæœºæ•°&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
func getNonce(blc block)int  {

	nonce := 0
	
	//æ”¹å˜nonceçš„å€¼ï¼Œå¦‚æœè¿”å›falseï¼Œnonce++
	
	for !mining(getHashValueStr(nonce,blc), blc.bits) {

		fmt.Println(getHashValueStr(nonce,blc))
		nonce ++

	}
	fmt.Println(getHashValueStr(nonce,blc))
	fmt.Println(&quot;å‡ºå—æˆåŠŸï¼&quot;)

	return nonce


}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;ä¸»å‡½æ•°&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
func main() {

	prev_block := &quot;000000000003ba27aa200b1cecaad478d2b00432346c3f1f3986da1afd33e506&quot;

	mrkl_root := &quot;000000000002d01c1fccc21636b607dfd930d31d01c3a62104612a1719011250&quot;

	time := &quot;1293623863&quot;

	bits := 4

	block := block{1, prev_block, mrkl_root, time, bits}

	nc := getNonce(block)

	fmt.Println(nc)

}

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://p7rz9r9fd.bkt.clouddn.com/4-27-1-3.png&quot; alt=&quot;1-3&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;ä»£ç åªæ˜¯ç®€å•çš„å®ç°äº†æ¯”ç‰¹å¸çš„æŒ–çŸ¿åŸç†ï¼Œå®é™…ä¸Šå¯èƒ½æ¯”è¿™å¤„ç†çš„æ›´ç»†è‡´ï¼Œè€ƒè™‘çš„æ›´å…¨é¢ä¸€äº›ã€‚
è‡³äºæŒ–çŸ¿çš„äº‹æƒ…ï¼Œå…µæ³•æœ‰äº‘â€œå…µè´µç¥é€Ÿâ€ï¼Œ17å¹´æ¯”ç‰¹å¸å¤§æ¶¨ï¼Œé‚£æ—¶å€™éš¾åº¦è¿˜ä¸æ˜¯å¾ˆé«˜ï¼Œå»äº‘å—å››å·é‚£è¾¹æŠ•èµ„çŸ¿å‚çš„äººéƒ½èµšçš„ç›†æ»¡é’µæ»¡ï¼Œæˆ‘å°±è®¤è¯†äº†ä¸€ä½17å¹´åˆæŒ–çŸ¿çš„çŸ¿å·¥ï¼Œæœ€é«˜å³°æ‹¥æœ‰20000å°S9ï¼Œä¸€å¹´èµšäº†å°†è¿‘10äº¿ï¼ŒæŠ•èµ„æˆæœ¬æ®è¯´æ˜¯å‡ åä¸‡ã€‚å½“ç„¶è¿™äº›ä¹Ÿéƒ½éœ€è¦ä¸€äº›çœ¼å…‰ï¼Œå‹‡æ°”ï¼Œæˆ‘åªæ˜¯åœ¨ç°åœ¨çœ‹è¿‡å»ç½¢äº†ï¼Œè‡³äºé‚£ä¸ªæ—¶å€™è°éƒ½ä¸çŸ¥é“æ¯”ç‰¹å¸èƒ½æ¶¨è¿™ä¹ˆçŒ›ã€‚åŒ…æ‹¬ç°åœ¨æˆ‘ä¹‹æ‰€ä»¥è¿˜ä¼šç»§ç»­è´­ç½®çŸ¿æœºï¼Œæ˜¯å› ä¸ºæˆ‘åŒæ ·è®¤ä¸ºç›®å‰æ¯”ç‰¹å¸è¿˜è¿œè¿œæœªåˆ°è¾¾å®ƒåº”æœ‰çš„ä»·å€¼ï¼Œäº§é‡è™½ç„¶å°‘ï¼Œä½†æ˜¯æŒ–å‡ºçš„å¸æˆ‘æ˜¯ä¸ä¼šå–çš„ï¼Œ5å¹´ä»¥åï¼Œ10å¹´ä»¥åå†çœ‹ï¼Œé‚£å¯èƒ½åŒæ ·ç°åœ¨çœ‹è¿‡å»çš„æ„Ÿè§‰ã€‚å½“ç„¶è¿™äº›ä¸æ˜¯é‡ç‚¹ï¼Œä¹Ÿä¸æ„æˆæŠ•èµ„å»ºè®®ã€‚é‡ç‚¹çœ‹ä»£ç ï¼Œçœ‹ä»£ç ï¼ğŸ˜‚&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/shuailaotou/go-&quot;&gt;githubæºä»£ç &lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æ®è¯´æ‰¾å·¥ä½œgithubçš„Starå¾ˆé‡è¦ï¼Œå“ˆå“ˆå“ˆã€‚å–œæ¬¢å°±starä¸€ä¸‹å§ï¼ğŸ‘»ğŸ‘»ğŸ‘»&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä½œè€…åŸåˆ›ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œå¦‚æœ‰é”™è¯¯æè¿°ï¼Œè¯·è¯„è®ºçº æ­£ï¼Œè°¢è°¢å¤§å®¶ï¼ğŸ³ğŸ³ğŸ³&lt;/p&gt;
&lt;/blockquote&gt;

</description>
        <pubDate>Thu, 03 May 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/05/03/Go%E8%AF%AD%E8%A8%80%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%E6%AF%94%E7%89%B9%E5%B8%81%E6%8C%96%E7%9F%BF%E5%8E%9F%E7%90%86/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/05/03/Go%E8%AF%AD%E8%A8%80%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%E6%AF%94%E7%89%B9%E5%B8%81%E6%8C%96%E7%9F%BF%E5%8E%9F%E7%90%86/</guid>
        
        <category>æŒ–çŸ¿</category>
        
        
      </item>
    
      <item>
        <title>Golangç»å…¸ç¬”è¯•é¢˜åŠç­”æ¡ˆï¼ˆä¸‹ç¯‡ï¼‰</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;æ•´ç†ï¼šé»è·ƒæ˜¥&lt;/p&gt;

  &lt;p&gt;åšå®¢ï¼šhttp://liyuechun.org&lt;/p&gt;

  &lt;p&gt;å®˜ç½‘ï¼šhttp://kongyixueyuan.com&lt;/p&gt;

  &lt;p&gt;å¤‡æ³¨ï¼šå¦‚æœ‰é”™è¯¯ï¼Œè¯·æŒ‡æ­£ï¼Œä¸æ–­æ›´æ–°è¿­ä»£&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;1-ä¸‹é¢ä»£ç èƒ½è¿è¡Œå—ä¸ºä»€ä¹ˆ&quot;&gt;1. ä¸‹é¢ä»£ç èƒ½è¿è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆ&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;type Param map[string]interface{}

type Show struct {
	Param
}

func main1() {
	s := new(Show)
	s.Param[&quot;RMB&quot;] = 10000
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;panic: assignment to entry in nil map

goroutine 1 [running]:
main.main()
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚ä¸Šæ‰€ç¤ºï¼Œè¿è¡Œè¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿå¼‚å¸¸ï¼ŒåŸå› æ˜¯å› ä¸ºå­—å…¸&lt;code class=&quot;highlighter-rouge&quot;&gt;Param&lt;/code&gt;çš„é»˜è®¤å€¼ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;nil&lt;/code&gt;ï¼Œå½“ç»™å­—å…¸&lt;code class=&quot;highlighter-rouge&quot;&gt;nil&lt;/code&gt;å¢åŠ é”®å€¼å¯¹æ˜¯å°±ä¼šå‘ç”Ÿè¿è¡Œæ—¶é”™è¯¯&lt;code class=&quot;highlighter-rouge&quot;&gt;panic: assignment to entry in nil map&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ­£ç¡®çš„ä¿®æ”¹æ–¹æ¡ˆå¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import &quot;fmt&quot;

type Param map[string]interface{}

type Show struct {
	Param
}

func main() {

	// åˆ›å»ºShowç»“æ„ä½“å¯¹è±¡
	s := new(Show)
	// ä¸ºå­—å…¸Paramèµ‹åˆå§‹å€¼
	s.Param = Param{}
	// ä¿®æ”¹é”®å€¼å¯¹
	s.Param[&quot;RMB&quot;] = 10000
	fmt.Println(s)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;amp;{map[RMB:10000]}

Process finished with exit code 0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;2-è¯·è¯´å‡ºä¸‹é¢ä»£ç å­˜åœ¨ä»€ä¹ˆé—®é¢˜&quot;&gt;2. è¯·è¯´å‡ºä¸‹é¢ä»£ç å­˜åœ¨ä»€ä¹ˆé—®é¢˜&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;type student struct {
	Name string
}

func f(v interface{}) {
	switch msg := v.(type) {
    	case *student, student:
    		msg.Name
	}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;é—®é¢˜ä¸€ï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;interface{}&lt;/code&gt;æ˜¯ä¸€ä¸ªæ²¡æœ‰å£°æ˜ä»»ä½•æ–¹æ³•çš„æ¥å£ã€‚&lt;/li&gt;
  &lt;li&gt;é—®é¢˜äºŒï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;Name&lt;/code&gt;æ˜¯ä¸€ä¸ªå±æ€§ï¼Œè€Œä¸æ˜¯æ–¹æ³•ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;interface{}&lt;/code&gt;ç±»å‹çš„å˜é‡æ— æ³•è°ƒç”¨å±æ€§ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;3-å†™å‡ºæ‰“å°çš„ç»“æœ&quot;&gt;3. å†™å‡ºæ‰“å°çš„ç»“æœã€‚&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;type People struct {
	name string `json:&quot;name&quot;`
}

func main() {
	js := `{
		&quot;name&quot;:&quot;11&quot;
	}`
	var p People
	err := json.Unmarshal([]byte(js), &amp;amp;p)
	if err != nil {
		fmt.Println(&quot;err: &quot;, err)
		return
	}
	fmt.Println(&quot;people: &quot;, p)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¾“å‡ºå†…å®¹å¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;people:  {}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;pä¸­çš„å±æ€§å€¼ä¸ºç©ºçš„åŸå› æ˜¯å› ä¸ºï¼Œnameçš„é¦–å­—æ¯å°å†™ï¼Œä¿®æ”¹æˆå¤§å†™ï¼Œé‡æ–°è¿è¡Œå³å¯ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import (
	&quot;encoding/json&quot;
	&quot;fmt&quot;
)

type People struct {
	Name string `json:&quot;name&quot;`
}

func main() {
	js := `{
        &quot;name&quot;:&quot;11&quot;
    }`
	var p People
	err := json.Unmarshal([]byte(js), &amp;amp;p)
	if err != nil {
		fmt.Println(&quot;err: &quot;, err)
		return
	}
	fmt.Println(&quot;people: &quot;, p)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;people:  {11}

Process finished with exit code 0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;4-ä¸‹é¢çš„ä»£ç æ˜¯æœ‰é—®é¢˜çš„è¯·è¯´æ˜åŸå› &quot;&gt;4. ä¸‹é¢çš„ä»£ç æ˜¯æœ‰é—®é¢˜çš„ï¼Œè¯·è¯´æ˜åŸå› ã€‚&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import &quot;fmt&quot;

type People struct {
	Name string
}

func (p *People) String() string {
	return fmt.Sprintf(&quot;print: %v&quot;, p)
}

func main() {
	p := &amp;amp;People{}
	p.String()
}

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;runtime: goroutine stack exceeds 1000000000-byte limit
fatal error: stack overflow

runtime stack:
runtime.throw(0x10c122b, 0xe)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä¸‹æ‰€ç¤ºï¼Œä¸Šé¢çš„ä»£ç å‡ºç°äº†æ ˆæº¢å‡ºï¼ŒåŸå› æ˜¯å› ä¸º%væ ¼å¼åŒ–å­—ç¬¦ä¸²æ˜¯æœ¬èº«ä¼šè°ƒç”¨String()æ–¹æ³•ï¼Œä¸Šé¢çš„æ ˆæº¢å‡ºæ˜¯å› ä¸ºæ— é™é€’å½’æ‰€è‡´ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;5-è¯·æ‰¾å‡ºä¸‹é¢ä»£ç çš„é—®é¢˜æ‰€åœ¨&quot;&gt;5. è¯·æ‰¾å‡ºä¸‹é¢ä»£ç çš„é—®é¢˜æ‰€åœ¨ã€‚&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import (
	&quot;fmt&quot;
	&quot;time&quot;
)

func main() {
	ch := make(chan int, 1000)
	go func() {
		for i := 0; i &amp;lt; 10; i++ {
			ch &amp;lt;- i
		}
	}()
	go func() {
		for {
			a, ok := &amp;lt;-ch
			if !ok {
				fmt.Println(&quot;close&quot;)
				return
			}
			fmt.Println(&quot;a: &quot;, a)
		}
	}()
	close(ch)
	fmt.Println(&quot;ok&quot;)
	time.Sleep(time.Second * 100)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;panic: send on closed channel
ok

goroutine 5 [running]:
main.main.func1(0xc420098000)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è§£æï¼šå‡ºç°ä¸Šé¢é”™è¯¯çš„åŸå› æ˜¯å› ä¸ºæå‰å…³é—­é€šé“æ‰€è‡´ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ­£ç¡®ä»£ç å¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import (
	&quot;fmt&quot;
	&quot;time&quot;
)

func main() {
	// åˆ›å»ºä¸€ä¸ªç¼“å†²é€šé“
	ch := make(chan int, 1000)

	go func() {
		for i := 0; i &amp;lt; 10; i++ {
			ch &amp;lt;- i
		}
	}()

	go func() {
		for i := 0; i &amp;lt; 10; i++ {
			a, ok := &amp;lt;-ch
			
			if !ok {
				fmt.Println(&quot;close&quot;)
				close(ch)
				return
			}
			fmt.Println(&quot;a: &quot;, a)
		}
	}()

	fmt.Println(&quot;ok&quot;)
	time.Sleep(time.Second)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ok
a:  0
a:  1
a:  2
a:  3
a:  4
a:  5
a:  6
a:  7
a:  8
a:  9
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;6-è¯·è¯´æ˜ä¸‹é¢ä»£ç ä¹¦å†™æ˜¯å¦æ­£ç¡®&quot;&gt;6. è¯·è¯´æ˜ä¸‹é¢ä»£ç ä¹¦å†™æ˜¯å¦æ­£ç¡®ã€‚&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;var value int32

func SetValue(delta int32) {
	for {
		v := value
		if atomic.CompareAndSwapInt32(&amp;amp;value, v(v+delta)) {
			break
		}
	}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;atomic.CompareAndSwapInt32&lt;/code&gt;é‡Œé¢ä¸€å…±ä¸‰ä¸ªå‚æ•°ï¼Œä¸Šé¢çš„ä¹¦å†™é”™è¯¯ï¼Œæ­£ç¡®çš„ä¹¦å†™æ˜¯ï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;atomic.CompareAndSwapInt32(&amp;amp;value, v,v+delta)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;func CompareAndSwapInt32(addr *int32, old, new int32) (swapped bool)&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼åº”è¯¥æ˜¯æŒ‡å‘è¢«æ“ä½œå€¼çš„æŒ‡é’ˆå€¼ã€‚è¯¥å€¼çš„ç±»å‹å³ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;*int32&lt;/code&gt;ã€‚&lt;/li&gt;
  &lt;li&gt;åä¸¤ä¸ªå‚æ•°çš„ç±»å‹éƒ½æ˜¯&lt;code class=&quot;highlighter-rouge&quot;&gt;int32&lt;/code&gt;ç±»å‹ã€‚å®ƒä»¬çš„å€¼åº”è¯¥åˆ†åˆ«ä»£è¡¨è¢«æ“ä½œå€¼çš„æ—§å€¼å’Œæ–°å€¼&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;CompareAndSwapInt32Â·å‡½æ•°åœ¨è¢«è°ƒç”¨ä¹‹åä¼šå…ˆåˆ¤æ–­å‚æ•°&lt;/code&gt;addr&lt;code class=&quot;highlighter-rouge&quot;&gt;æŒ‡å‘çš„è¢«æ“ä½œå€¼ä¸å‚æ•°&lt;/code&gt;old`çš„å€¼æ˜¯å¦ç›¸ç­‰ã€‚&lt;/li&gt;
  &lt;li&gt;ä»…å½“æ­¤åˆ¤æ–­å¾—åˆ°è‚¯å®šçš„ç»“æœä¹‹åï¼Œè¯¥å‡½æ•°æ‰ä¼šç”¨å‚æ•°&lt;code class=&quot;highlighter-rouge&quot;&gt;new&lt;/code&gt;ä»£è¡¨çš„æ–°å€¼æ›¿æ¢æ‰åŸå…ˆçš„æ—§å€¼ã€‚å¦åˆ™ï¼Œåé¢çš„æ›¿æ¢æ“ä½œå°±ä¼šè¢«å¿½ç•¥ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import (
	&quot;sync/atomic&quot;
	&quot;fmt&quot;
)

var value int32

func SetValue(delta int32) {
	for {
		v := value
		// æ¯”è¾ƒå¹¶äº¤æ¢

		if atomic.CompareAndSwapInt32(&amp;amp;value, v,v+delta) {
			fmt.Println(value)
			break
		}
	}
}

func main()  {
	SetValue(100)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;100&lt;/code&gt;.&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;7-ä¸‹é¢çš„ç¨‹åºè¿è¡Œåä¸ºä»€ä¹ˆä¼šçˆ†å¼‚å¸¸&quot;&gt;7. ä¸‹é¢çš„ç¨‹åºè¿è¡Œåä¸ºä»€ä¹ˆä¼šçˆ†å¼‚å¸¸ã€‚&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import (
	&quot;fmt&quot;
	&quot;time&quot;
)

type Project struct{}

func (p *Project) deferError() {
	if err := recover(); err != nil {
		fmt.Println(&quot;recover: &quot;, err)
	}
}

func (p *Project) exec(msgchan chan interface{}) {
	for msg := range msgchan {
		m := msg.(int)
		fmt.Println(&quot;msg: &quot;, m)
	}
}

func (p *Project) run(msgchan chan interface{}) {
	for {
		defer p.deferError()
		go p.exec(msgchan)
		time.Sleep(time.Second * 2)
	}
}

func (p *Project) Main() {
	a := make(chan interface{}, 100)
	go p.run(a)
	go func() {
		for {
			a &amp;lt;- &quot;1&quot;
			time.Sleep(time.Second)
		}
	}()
	time.Sleep(time.Second * 100)
}

func main() {
	p := new(Project)
	p.Main()
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;panic: interface conversion: interface {} is string, not int

goroutine 17 [running]:
main.(*Project).exec(0x1157c08, 0xc420068060)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;å‡ºç°å¼‚å¸¸çš„åŸå› æ˜¯å› ä¸ºå†™å…¥åˆ°ç®¡é“çš„æ•°æ®ç±»å‹ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;,è€Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;m := msg.(int)&lt;/code&gt;è¿™å¥ä»£ç é‡Œé¢å´ä½¿ç”¨äº†&lt;code class=&quot;highlighter-rouge&quot;&gt;int&lt;/code&gt;ï¼Œä¿®æ”¹æ–¹æ³•ï¼Œå°†&lt;code class=&quot;highlighter-rouge&quot;&gt;int&lt;/code&gt;ä¿®æ”¹ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;å³å¯ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å®Œæ•´æ­£ç¡®ä»£ç å¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import (
	&quot;fmt&quot;
	&quot;time&quot;
)

type Project struct{}

func (p *Project) deferError() {
	if err := recover(); err != nil {
		fmt.Println(&quot;recover: &quot;, err)
	}
}

func (p *Project) exec(msgchan chan interface{}) {
	for msg := range msgchan {
		m := msg.(string)
		fmt.Println(&quot;msg: &quot;, m)
	}
}

func (p *Project) run(msgchan chan interface{}) {
	for {
		defer p.deferError()
		go p.exec(msgchan)
		time.Sleep(time.Second * 2)
	}
}

func (p *Project) Main() {
	a := make(chan interface{}, 100)
	go p.run(a)
	go func() {
		for {
			a &amp;lt;- &quot;1&quot;
			time.Sleep(time.Second)
		}
	}()
	time.Sleep(time.Second * 100)
}

func main() {
	p := new(Project)
	p.Main()
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;msg:  1
msg:  1
msg:  1
.
.
.
msg:  1
msg:  1
msg:  1
msg:  1
msg:  1
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;8-è¯·è¯´å‡ºä¸‹é¢ä»£ç å“ªé‡Œå†™é”™äº†&quot;&gt;8. è¯·è¯´å‡ºä¸‹é¢ä»£ç å“ªé‡Œå†™é”™äº†ã€‚&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;func main() {
	abc := make(chan int, 1000)
	for i := 0; i &amp;lt; 10; i++ {
		abc &amp;lt;- i
	}
	go func() {
		for {
			a := &amp;lt;-abc
			fmt.Println(&quot;a: &quot;, a)
		}
	}()
	close(abc)
	fmt.Println(&quot;close&quot;)
	time.Sleep(time.Second * 100)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;goä¸­çš„forå¾ªç¯æ˜¯æ­»å¾ªç¯ï¼Œåº”è¯¥è®¾ç½®å‡ºå£ã€‚æ­£ç¡®ä»£ç å¦‚ä¸‹ï¼š&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import (
	&quot;fmt&quot;
	&quot;time&quot;
)

func main() {
	abc := make(chan int, 1000)
	for i := 0; i &amp;lt; 10; i++ {
		abc &amp;lt;- i
	}
	go func() {
		for {
			a,ok := &amp;lt;-abc
			if !ok {
				fmt.Println(&quot;ç»“æŸï¼&quot;)
				return
			}
			fmt.Println(&quot;a: &quot;, a)
		}
	}()
	close(abc)
	fmt.Println(&quot;close&quot;)
	time.Sleep(time.Second * 100)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœä¸ºï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;close
a:  0
a:  1
a:  2
a:  3
a:  4
a:  5
a:  6
a:  7
a:  8
a:  9
ç»“æŸï¼
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;9-è¯·è¯´å‡ºä¸‹é¢ä»£ç æ‰§è¡Œæ—¶ä¸ºä»€ä¹ˆä¼šæŠ¥é”™&quot;&gt;9. è¯·è¯´å‡ºä¸‹é¢ä»£ç ï¼Œæ‰§è¡Œæ—¶ä¸ºä»€ä¹ˆä¼šæŠ¥é”™&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;type Student struct {
	name string
}

func main() {
	m := map[string]Student{&quot;people&quot;: {&quot;liyuechun&quot;}}
	m[&quot;people&quot;].name = &quot;wuyanzu&quot;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;ç­”æ¡ˆï¼šæŠ¥é”™çš„åŸå› æ˜¯å› ä¸ºä¸èƒ½ä¿®æ”¹å­—å…¸ä¸­&lt;code class=&quot;highlighter-rouge&quot;&gt;value&lt;/code&gt;ä¸ºç»“æ„ä½“çš„å±æ€§å€¼ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä»£ç ä½œå¦‚ä¸‹ä¿®æ”¹æ–¹å¯è¿è¡Œï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import &quot;fmt&quot;

type Student struct {
	name string
}

func main() {
	m := map[string]Student{&quot;people&quot;: {&quot;liyuechun&quot;}}
	fmt.Println(m)
	fmt.Println(m[&quot;people&quot;])

	// ä¸èƒ½ä¿®æ”¹å­—å…¸ä¸­ç»“æ„ä½“å±æ€§çš„å€¼
	//m[&quot;people&quot;].name = &quot;wuyanzu&quot;
	
	var s Student = m[&quot;people&quot;] //æ·±æ‹·è´
	s.name = &quot;xietingfeng&quot;
	fmt.Println(m)
	fmt.Println(s)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;map[people:{liyuechun}]
{liyuechun}
map[people:{liyuechun}]
{wuyanzu}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;10-è¯·è¯´å‡ºä¸‹é¢çš„ä»£ç å­˜åœ¨ä»€ä¹ˆé—®é¢˜&quot;&gt;10. è¯·è¯´å‡ºä¸‹é¢çš„ä»£ç å­˜åœ¨ä»€ä¹ˆé—®é¢˜&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;type query func(string) string

func exec(name string, vs ...query) string {
	ch := make(chan string)
	fn := func(i int) {
		ch &amp;lt;- vs[i](name)
	}
	for i, _ := range vs {
		go fn(i)
	}
	return &amp;lt;-ch
}

func main() {
	ret := exec(&quot;111&quot;, func(n string) string {
		return n + &quot;func1&quot;
	}, func(n string) string {
		return n + &quot;func2&quot;
	}, func(n string) string {
		return n + &quot;func3&quot;
	}, func(n string) string {
		return n + &quot;func4&quot;
	})
	fmt.Println(ret)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;return &amp;lt;-ch&lt;/code&gt;&lt;/strong&gt;ä¹‹æ‰§è¡Œä¸€æ¬¡ï¼Œæ‰€ä»¥ä¸ç®¡ä¼ å…¥å¤šå°‘&lt;code class=&quot;highlighter-rouge&quot;&gt;query&lt;/code&gt;å‡½æ•°ï¼Œéƒ½åªæ˜¯è¯»å–æœ€å…ˆæ‰§è¡Œå®Œçš„&lt;code class=&quot;highlighter-rouge&quot;&gt;query&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å…³æ³¨åŒºå—é“¾éƒ¨è½å®æ—¶è·å–æœ€æ–°æŠ€æœ¯æ–‡ç« &quot;&gt;å…³æ³¨åŒºå—é“¾éƒ¨è½ï¼Œå®æ—¶è·å–æœ€æ–°æŠ€æœ¯æ–‡ç« &lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://om1c35wrq.bkt.clouddn.com/%E5%8C%BA%E5%9D%97%E9%93%BE%E9%83%A8%E8%90%BD-1.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

</description>
        <pubDate>Fri, 27 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/04/27/golang-interview/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/04/27/golang-interview/</guid>
        
        <category>ç¬”è¯•é¢˜</category>
        
        
      </item>
    
      <item>
        <title>Golangç»å…¸ç¬”è¯•é¢˜åŠç­”æ¡ˆï¼ˆä¸Šç¯‡ï¼‰</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;æ•´ç†ï¼šé»è·ƒæ˜¥
åšå®¢ï¼šhttp://liyuechun.org
å®˜ç½‘ï¼šhttp://kongyixueyuan.com&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;1-å†™å‡ºä¸‹é¢ä»£ç è¾“å‡ºå†…å®¹&quot;&gt;1. å†™å‡ºä¸‹é¢ä»£ç è¾“å‡ºå†…å®¹&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-Go&quot;&gt;package main

import (
	&quot;fmt&quot;
)

func main() {
	defer_call()
}

func defer_call() {

	defer func() {
		fmt.Println(&quot;æ‰“å°å‰&quot;)
	}()

	defer func() {
		fmt.Println(&quot;æ‰“å°ä¸­&quot;)
	}()

	defer func() {
		fmt.Println(&quot;æ‰“å°å&quot;)
	}()

	panic(&quot;è§¦å‘å¼‚å¸¸&quot;)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;è§¦å‘å¼‚å¸¸&lt;/code&gt;è¿™å‡ ä¸ªå­—æ‰“å°çš„é¡ºåºå…¶å®æ˜¯ä¸ç¡®å®šçš„ã€‚&lt;code class=&quot;highlighter-rouge&quot;&gt;defer&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;recover&lt;/code&gt;ä¸€èˆ¬éƒ½ä¼šé…å¥—ä½¿ç”¨æ¥æ•æ‰å¼‚å¸¸ã€‚å…ˆçœ‹ä¸‹é¢çš„æ¡ˆä¾‹ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;æ¡ˆä¾‹ä¸€&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import (
	&quot;fmt&quot;
)

func main() {
	defer_call()
}

func defer_call() {

	defer func() {
		fmt.Println(&quot;æ‰“å°å‰&quot;)
	}()

	defer func() {
		fmt.Println(&quot;æ‰“å°ä¸­&quot;)
	}()

	defer func() { // å¿…é¡»è¦å…ˆå£°æ˜deferï¼Œå¦åˆ™recover()ä¸èƒ½æ•è·åˆ°panicå¼‚å¸¸

		if err := recover();err != nil {
			fmt.Println(err) //err å°±æ˜¯panicä¼ å…¥çš„å‚æ•°
		}
		fmt.Println(&quot;æ‰“å°å&quot;)
	}()

	panic(&quot;è§¦å‘å¼‚å¸¸&quot;)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¾“å‡ºå†…å®¹ä¸ºï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;è§¦å‘å¼‚å¸¸
æ‰“å°å
æ‰“å°ä¸­
æ‰“å°å‰

Process finished with exit code 0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;æ¡ˆä¾‹äºŒ&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import (
	&quot;fmt&quot;
)

func main() {
	defer_call()
}

func defer_call() {

	defer func() {
		fmt.Println(&quot;æ‰“å°å‰&quot;)
	}()

	defer func() { // å¿…é¡»è¦å…ˆå£°æ˜deferï¼Œå¦åˆ™recover()ä¸èƒ½æ•è·åˆ°panicå¼‚å¸¸
		if err := recover();err != nil {
			fmt.Println(err) //err å°±æ˜¯panicä¼ å…¥çš„å‚æ•°
		}
		fmt.Println(&quot;æ‰“å°ä¸­&quot;)
	}()

	defer func() {

		fmt.Println(&quot;æ‰“å°å&quot;)
	}()

	panic(&quot;è§¦å‘å¼‚å¸¸&quot;)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¾“å‡ºå†…å®¹ä¸ºï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;æ‰“å°å
è§¦å‘å¼‚å¸¸
æ‰“å°ä¸­
æ‰“å°å‰

Process finished with exit code 0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;æ¡ˆä¾‹ä¸‰&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import (
	&quot;fmt&quot;
)

func main() {
	defer_call()
}

func defer_call() {

	defer func() {
		if err := recover();err != nil {
			fmt.Println(err) //err å°±æ˜¯panicä¼ å…¥çš„å‚æ•°
		}
		fmt.Println(&quot;æ‰“å°å‰&quot;)
	}()

	defer func() { // å¿…é¡»è¦å…ˆå£°æ˜deferï¼Œå¦åˆ™recover()ä¸èƒ½æ•è·åˆ°panicå¼‚å¸¸
		if err := recover();err != nil {
			fmt.Println(err) //err å°±æ˜¯panicä¼ å…¥çš„å‚æ•°
		}
		fmt.Println(&quot;æ‰“å°ä¸­&quot;)
	}()

	defer func() {
		if err := recover();err != nil {
			fmt.Println(err) //err å°±æ˜¯panicä¼ å…¥çš„å‚æ•°
		}
		fmt.Println(&quot;æ‰“å°å&quot;)
	}()

	panic(&quot;è§¦å‘å¼‚å¸¸&quot;)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¾“å‡ºå†…å®¹ä¸ºï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;è§¦å‘å¼‚å¸¸
æ‰“å°å
æ‰“å°ä¸­
æ‰“å°å‰

Process finished with exit code 0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;æ€»ç»“ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;defer&lt;/code&gt;å‡½æ•°å±å»¶è¿Ÿæ‰§è¡Œï¼Œå»¶è¿Ÿåˆ°è°ƒç”¨è€…å‡½æ•°æ‰§è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;return&lt;/code&gt; å‘½ä»¤å‰è¢«æ‰§è¡Œã€‚å¤šä¸ª&lt;code class=&quot;highlighter-rouge&quot;&gt;defer&lt;/code&gt;ä¹‹é—´æŒ‰&lt;code class=&quot;highlighter-rouge&quot;&gt;LIFO&lt;/code&gt;å…ˆè¿›åå‡ºé¡ºåºæ‰§è¡Œã€‚&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Go&lt;/code&gt;ä¸­å¯ä»¥æŠ›å‡ºä¸€ä¸ª&lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt;çš„å¼‚å¸¸ï¼Œç„¶ååœ¨&lt;code class=&quot;highlighter-rouge&quot;&gt;defer&lt;/code&gt;ä¸­é€šè¿‡&lt;code class=&quot;highlighter-rouge&quot;&gt;recover&lt;/code&gt;æ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œç„¶åæ­£å¸¸å¤„ç†ã€‚&lt;/li&gt;
  &lt;li&gt;å¦‚æœåŒæ—¶æœ‰å¤šä¸ª&lt;code class=&quot;highlighter-rouge&quot;&gt;defer&lt;/code&gt;ï¼Œé‚£ä¹ˆå¼‚å¸¸ä¼šè¢«æœ€è¿‘çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;recover()&lt;/code&gt;æ•è·å¹¶æ­£å¸¸å¤„ç†ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;2-ä»¥ä¸‹ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜è¯´æ˜åŸå› &quot;&gt;2. ä»¥ä¸‹ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œè¯´æ˜åŸå› &lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-Go&quot;&gt;package main
import (
	&quot;fmt&quot;
)
type student struct {
	Name string
	Age  int
}
func pase_student() map[string]*student {
	m := make(map[string]*student)
	stus := []student{
		{Name: &quot;zhou&quot;, Age: 24},
		{Name: &quot;li&quot;, Age: 23},
		{Name: &quot;wang&quot;, Age: 22},
	}
	for _, stu := range stus {
		m[stu.Name] = &amp;amp;stu
	}
	return m
}
func main() {
	students := pase_student()
	for k, v := range students {
		fmt.Printf(&quot;key=%s,value=%v \n&quot;, k, v)
	}
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;key=zhou,value=&amp;amp;{wang 22} 
key=li,value=&amp;amp;{wang 22} 
key=wang,value=&amp;amp;{wang 22} 

Process finished with exit code 0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å°†ä¸‹é¢çš„ä»£ç ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;for _, stu := range stus {
    m[stu.Name] = &amp;amp;stu
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;ä¿®æ”¹ä¸ºï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;for _, stu := range stus {
	fmt.Printf(&quot;%v\t%p\n&quot;,stu,&amp;amp;stu)
	m[stu.Name] = &amp;amp;stu
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœä¸ºï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;shen&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;xc&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4200&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4020&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;li&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;xc&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4200&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4020&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;wang&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;xc&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4200&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4020&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;key=shen,value=&amp;amp;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;wang&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;key=li,value=&amp;amp;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;wang&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;key=wang,value=&amp;amp;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;wang&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 

&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;Process&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;finished&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;é€šè¿‡ä¸Šé¢çš„æ¡ˆä¾‹ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°&lt;code class=&quot;highlighter-rouge&quot;&gt;stu&lt;/code&gt;&lt;/strong&gt;å˜é‡çš„åœ°å€å§‹ç»ˆä¿æŒä¸å˜ï¼Œæ¯æ¬¡éå†ä»…è¿›è¡Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;struct&lt;/code&gt;å€¼æ‹·è´ï¼Œæ•…&lt;code class=&quot;highlighter-rouge&quot;&gt;m[stu.Name]=&amp;amp;stu&lt;/code&gt;å®é™…ä¸Šä¸€ç›´æŒ‡å‘åŒä¸€ä¸ªåœ°å€ï¼Œæœ€ç»ˆè¯¥åœ°å€çš„å€¼ä¸ºéå†çš„æœ€åä¸€ä¸ª&lt;code class=&quot;highlighter-rouge&quot;&gt;struct&lt;/code&gt;çš„å€¼æ‹·è´ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å½¢åŒå¦‚ä¸‹ä»£ç ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;var stu student 
for _, stu = range stus {
	m[stu.Name] = &amp;amp;stu
} 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;ä¿®æ­£æ–¹æ¡ˆï¼Œå–æ•°ç»„ä¸­åŸå§‹å€¼çš„åœ°å€ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;for i, _ := range stus {
	stu:=stus[i]
	m[stu.Name] = &amp;amp;stu
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;é‡æ–°è¿è¡Œï¼Œæ•ˆæœå¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;shen&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;xc&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42000&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;060&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;li&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;xc&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42000&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;wang&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;xc&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42000&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;key=shen,value=&amp;amp;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;shen&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;key=li,value=&amp;amp;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;li&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;key=wang,value=&amp;amp;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;wang&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 

&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;Process&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;finished&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;3-ä¸‹é¢çš„ä»£ç ä¼šè¾“å‡ºä»€ä¹ˆå¹¶è¯´æ˜åŸå› &quot;&gt;3. ä¸‹é¢çš„ä»£ç ä¼šè¾“å‡ºä»€ä¹ˆï¼Œå¹¶è¯´æ˜åŸå› &lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import (
	&quot;fmt&quot;
	&quot;runtime&quot;
	&quot;sync&quot;
)

func init() {
	fmt.Println(&quot;Current Go Version:&quot;, runtime.Version())
}
func main() {
	runtime.GOMAXPROCS(1)

	count := 10
	wg := sync.WaitGroup{}
	wg.Add(count * 2)
	for i := 0; i &amp;lt; count; i++ {
		go func() {
			fmt.Printf(&quot;[%d]&quot;, i)
			wg.Done()
		}()
	}
	for i := 0; i &amp;lt; count; i++ {
		go func(i int) {
			fmt.Printf(&quot;-%d-&quot;, i)
			wg.Done()
		}(i)
	}
	wg.Wait()
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œæ•ˆæœï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Current Go Version: go1.10.1
-9-[10][10][10][10][10][10][10][10][10][10]-0--1--2--3--4--5--6--7--8-
Process finished with exit code 0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¸¤ä¸ª&lt;code class=&quot;highlighter-rouge&quot;&gt;for&lt;/code&gt;å¾ªç¯å†…éƒ¨&lt;code class=&quot;highlighter-rouge&quot;&gt;go func&lt;/code&gt; è°ƒç”¨å‚æ•°içš„æ–¹å¼æ˜¯ä¸åŒçš„ï¼Œå¯¼è‡´ç»“æœå®Œå…¨ä¸åŒã€‚è¿™ä¹Ÿæ˜¯æ–°æ‰‹å®¹æ˜“é‡åˆ°çš„å‘ã€‚&lt;/p&gt;

&lt;p&gt;ç¬¬ä¸€ä¸ª&lt;code class=&quot;highlighter-rouge&quot;&gt;go func&lt;/code&gt;ä¸­&lt;code class=&quot;highlighter-rouge&quot;&gt;i&lt;/code&gt;æ˜¯å¤–éƒ¨&lt;code class=&quot;highlighter-rouge&quot;&gt;for&lt;/code&gt;çš„ä¸€ä¸ªå˜é‡ï¼Œåœ°å€ä¸å˜åŒ–ã€‚éå†å®Œæˆåï¼Œæœ€ç»ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;i=10&lt;/code&gt;ã€‚æ•…&lt;code class=&quot;highlighter-rouge&quot;&gt;go func&lt;/code&gt;æ‰§è¡Œæ—¶ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;i&lt;/code&gt;çš„å€¼å§‹ç»ˆæ˜¯&lt;code class=&quot;highlighter-rouge&quot;&gt;10&lt;/code&gt;ï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;10&lt;/code&gt;æ¬¡éå†å¾ˆå¿«å®Œæˆï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;ç¬¬äºŒä¸ª&lt;code class=&quot;highlighter-rouge&quot;&gt;go func&lt;/code&gt;ä¸­&lt;code class=&quot;highlighter-rouge&quot;&gt;i&lt;/code&gt;æ˜¯å‡½æ•°å‚æ•°ï¼Œä¸å¤–éƒ¨&lt;code class=&quot;highlighter-rouge&quot;&gt;for&lt;/code&gt;ä¸­çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;i&lt;/code&gt;å®Œå…¨æ˜¯ä¸¤ä¸ªå˜é‡ã€‚å°¾éƒ¨(&lt;code class=&quot;highlighter-rouge&quot;&gt;i&lt;/code&gt;)å°†å‘ç”Ÿå€¼æ‹·è´ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;go func&lt;/code&gt;å†…éƒ¨æŒ‡å‘å€¼æ‹·è´åœ°å€ã€‚&lt;/p&gt;

&lt;h3 id=&quot;4-ä¸‹é¢ä»£ç ä¼šè¾“å‡ºä»€ä¹ˆ&quot;&gt;4. ä¸‹é¢ä»£ç ä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import &quot;fmt&quot;

type People struct{}

func (p *People) ShowA() {
	fmt.Println(&quot;showA&quot;)
	p.ShowB()
}
func (p *People) ShowB() {
	fmt.Println(&quot;showB&quot;)
}

type Teacher struct {
	People
}

func (t *Teacher) ShowB() {
	fmt.Println(&quot;teacher showB&quot;)
}

func main() {
	t := Teacher{}
	t.ShowA()
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;showA
showB

Process finished with exit code 0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Go&lt;/code&gt;ä¸­æ²¡æœ‰ç»§æ‰¿,ä¸Šé¢è¿™ç§å†™æ³•å«ç»„åˆã€‚&lt;/p&gt;

&lt;p&gt;ä¸Šé¢çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;t.ShowA()&lt;/code&gt;ç­‰ä»·äº&lt;code class=&quot;highlighter-rouge&quot;&gt;t.People.ShowA()&lt;/code&gt;ï¼Œå°†ä¸Šé¢çš„ä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;func main() {
	t := Teacher{}
	t.ShowA()
	fmt.Println(&quot;---------------&quot;)
	t.People.ShowA()
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœä¸ºï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;showA
showB
---------------
showA
showB

Process finished with exit code 0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;5-ä¸‹é¢ä»£ç ä¼šè§¦å‘å¼‚å¸¸å—è¯·è¯¦ç»†è¯´æ˜&quot;&gt;5. ä¸‹é¢ä»£ç ä¼šè§¦å‘å¼‚å¸¸å—ï¼Ÿè¯·è¯¦ç»†è¯´æ˜&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

func main() {
	runtime.GOMAXPROCS(1)
	int_chan := make(chan int, 1)
	string_chan := make(chan string, 1)
	int_chan &amp;lt;- 1
	string_chan &amp;lt;- &quot;hello&quot;
	select {
    	case value := &amp;lt;-int_chan:
    		fmt.Println(value)
    	case value := &amp;lt;-string_chan:
    		panic(value)
	}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æœ‰å¯èƒ½ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œå¦‚æœæ²¡æœ‰&lt;code class=&quot;highlighter-rouge&quot;&gt;selct&lt;/code&gt;è¿™æ®µä»£ç ï¼Œå°±ä¼šå‡ºç°çº¿ç¨‹é˜»å¡ï¼Œå½“æœ‰&lt;code class=&quot;highlighter-rouge&quot;&gt;selct&lt;/code&gt;è¿™ä¸ªè¯­å¥åï¼Œç³»ç»Ÿä¼šéšæœºæŠ½å–ä¸€ä¸ª&lt;code class=&quot;highlighter-rouge&quot;&gt;case&lt;/code&gt;è¿›è¡Œåˆ¤æ–­ï¼Œåªæœ‰æœ‰å…¶ä¸­ä¸€æ¡è¯­å¥æ­£å¸¸&lt;code class=&quot;highlighter-rouge&quot;&gt;return&lt;/code&gt;ï¼Œæ­¤ç¨‹åºå°†ç«‹å³æ‰§è¡Œã€‚&lt;/p&gt;

&lt;h3 id=&quot;6-ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆ&quot;&gt;6. ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import &quot;fmt&quot;

func calc(index string, a, b int) int {
	ret := a + b
	fmt.Println(index, a, b, ret)
	return ret
}

func main() {
	a := 1
	b := 2
	defer calc(&quot;1&quot;, a, calc(&quot;10&quot;, a, b))
	a = 0
	defer calc(&quot;2&quot;, a, calc(&quot;20&quot;, a, b))
	b = 1
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;10 1 2 3
20 0 2 2
2 0 2 2
1 1 3 4

Process finished with exit code 0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;åœ¨è§£é¢˜å‰éœ€è¦æ˜ç¡®ä¸¤ä¸ªæ¦‚å¿µï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;defer&lt;/code&gt;æ˜¯åœ¨å‡½æ•°æœ«å°¾çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;return&lt;/code&gt;å‰æ‰§è¡Œï¼Œå…ˆè¿›åæ‰§è¡Œã€‚&lt;/li&gt;
  &lt;li&gt;å‡½æ•°è°ƒç”¨æ—¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;int&lt;/code&gt; å‚æ•°å‘ç”Ÿå€¼æ‹·è´ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¸ç®¡ä»£ç é¡ºåºå¦‚ä½•ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;defer calc func&lt;/code&gt;ä¸­å‚æ•°&lt;code class=&quot;highlighter-rouge&quot;&gt;b&lt;/code&gt;å¿…é¡»å…ˆè®¡ç®—ï¼Œæ•…ä¼šåœ¨è¿è¡Œåˆ°ç¬¬ä¸‰è¡Œæ—¶ï¼Œæ‰§è¡Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;calc(&quot;10&quot;,a,b)&lt;/code&gt;è¾“å‡ºï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;10 1 2 3&lt;/code&gt;å¾—åˆ°å€¼&lt;code class=&quot;highlighter-rouge&quot;&gt;3&lt;/code&gt;ï¼Œå°†&lt;code class=&quot;highlighter-rouge&quot;&gt;cal(&quot;1&quot;,1,3)&lt;/code&gt;å­˜æ”¾åˆ°å»¶åæ‰§æ‰§è¡Œå‡½æ•°é˜Ÿåˆ—ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;æ‰§è¡Œåˆ°ç¬¬äº”è¡Œæ—¶ï¼Œç°è¡Œè®¡ç®—&lt;code class=&quot;highlighter-rouge&quot;&gt;calc(&quot;20&quot;, a, b)&lt;/code&gt;å³&lt;code class=&quot;highlighter-rouge&quot;&gt;calc(&quot;20&quot;, 0, 2)&lt;/code&gt;è¾“å‡ºï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;20 0 2 2&lt;/code&gt;å¾—åˆ°å€¼&lt;code class=&quot;highlighter-rouge&quot;&gt;2&lt;/code&gt;,å°†&lt;code class=&quot;highlighter-rouge&quot;&gt;cal(&quot;2&quot;,0,2)&lt;/code&gt;å­˜æ”¾åˆ°å»¶åæ‰§è¡Œå‡½æ•°é˜Ÿåˆ—ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;æ‰§è¡Œåˆ°æœ«å°¾è¡Œï¼ŒæŒ‰é˜Ÿåˆ—å…ˆè¿›åå‡ºåŸåˆ™ä¾æ¬¡æ‰§è¡Œï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;cal(&quot;2&quot;,0,2)ã€cal(&quot;1&quot;,1,3) &lt;/code&gt;ï¼Œä¾æ¬¡è¾“å‡ºï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;2 0 2 2ã€1 1 3 4&lt;/code&gt; ã€‚&lt;/p&gt;

&lt;h3 id=&quot;7-è¯·å†™å‡ºä»¥ä¸‹è¾“å…¥å†…å®¹&quot;&gt;7. è¯·å†™å‡ºä»¥ä¸‹è¾“å…¥å†…å®¹&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import &quot;fmt&quot;

func main() {
	s := make([]int, 5)
	fmt.Printf(&quot;%p\n&quot;, s)
	s = append(s, 1, 2, 3)
	fmt.Printf(&quot;%p\n&quot;, s) //new pointer
	fmt.Println(s)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœ:&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;0xc4200180c0
0xc42001c0a0
[0 0 0 0 0 1 2 3]

Process finished with exit code 0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;8-ä¸‹é¢çš„ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜&quot;&gt;8. ä¸‹é¢çš„ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
package main

import (
	&quot;fmt&quot;
	&quot;sync&quot;
)

type UserAges struct {
	ages map[string]int
	sync.Mutex
}

func (ua *UserAges) Add(name string, age int) {
	ua.Lock()
	defer ua.Unlock()
	ua.ages[name] = age
}

func (ua *UserAges) Get(name string) int {
	if age, ok := ua.ages[name]; ok {
		return age
	}
	return -1
}

func main() {
	count := 1000
	gw := sync.WaitGroup{}
	gw.Add(count * 3)
	u := UserAges{ages: map[string]int{}}
	add := func(i int) {
		u.Add(fmt.Sprintf(&quot;user_%d&quot;, i), i)
		gw.Done()
	}
	
	for i := 0; i &amp;lt; count; i++ {
		go add(i)
		go add(i)
	}
	
	for i := 0; i &amp;lt; count; i++ {
		go func(i int) {
			defer gw.Done()
			u.Get(fmt.Sprintf(&quot;user_%d&quot;, i))
		}(i)
	}
	gw.Wait()
	fmt.Println(&quot;Done&quot;)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¾“å‡ºç»“æœï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;fatal error: concurrent map read and map write

goroutine 2022 [running]:
runtime.throw(0x10c5472, 0x21)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;ç»“è®ºï¼š&lt;/strong&gt; åœ¨æ‰§è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;Get&lt;/code&gt; æ–¹æ³•æ—¶å¯èƒ½è¢«&lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;è™½ç„¶æœ‰ä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;sync.Mutex&lt;/code&gt;åšå†™é”ï¼Œä½†æ˜¯&lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt;æ˜¯å¹¶å‘è¯»å†™ä¸å®‰å…¨çš„ã€‚&lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt;å±äºå¼•ç”¨ç±»å‹ï¼Œå¹¶å‘è¯»å†™æ—¶å¤šä¸ªåç¨‹è§æ˜¯é€šè¿‡æŒ‡é’ˆè®¿é—®åŒä¸€ä¸ªåœ°å€ï¼Œå³è®¿é—®å…±äº«å˜é‡ï¼Œæ­¤æ—¶åŒæ—¶è¯»å†™èµ„æºå­˜åœ¨ç«äº‰å…³ç³»ã€‚æ‰€ä»¥ä¼šæŠ¥é”™è¯¯ä¿¡æ¯:&lt;code class=&quot;highlighter-rouge&quot;&gt;fatal error: concurrent map read and map write&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœç¬¬ä¸€æ¬¡æ²¡å¤ç°&lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt;é—®é¢˜ï¼Œå¯ä»¥å†æ¬¡è¿è¡Œï¼Œå¤ç°è¯¥é—®é¢˜ã€‚é‚£ä¹ˆå¦‚ä½•æ”¹å–„å‘¢? åœ¨&lt;code class=&quot;highlighter-rouge&quot;&gt;Go1.9&lt;/code&gt;æ–°ç‰ˆæœ¬ä¸­å°†æä¾›å¹¶å‘å®‰å…¨çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt;ã€‚é¦–å…ˆéœ€è¦äº†è§£ä¸¤ç§é”çš„ä¸åŒï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sync.Mutex&lt;/code&gt;äº’æ–¥é”&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sync.RWMutex&lt;/code&gt;è¯»å†™é”ï¼ŒåŸºäºäº’æ–¥é”çš„å®ç°ï¼Œå¯ä»¥åŠ å¤šä¸ªè¯»é”æˆ–è€…ä¸€ä¸ªå†™é”ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;RWMutexç›¸å…³æ–¹æ³•ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;type RWMutex
    func (rw *RWMutex) Lock() 
    func (rw *RWMutex) RLock()
    func (rw *RWMutex) RLocker() Locker
    func (rw *RWMutex) RUnlock()
    func (rw *RWMutex) Unlock()
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;ä»£ç æ”¹è¿›å¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import (
	&quot;fmt&quot;
	&quot;sync&quot;
)

type UserAges struct {
	ages map[string]int
	sync.RWMutex
}

func (ua *UserAges) Add(name string, age int) {
	ua.Lock()
	defer ua.Unlock()
	ua.ages[name] = age
}

func (ua *UserAges) Get(name string) int {
	ua.RLock()
	defer ua.RUnlock()
	if age, ok := ua.ages[name]; ok {
		return age
	}

	return -1
}

func main() {
	count := 10000
	gw := sync.WaitGroup{}
	gw.Add(count * 3)
	u := UserAges{ages: map[string]int{}}
	add := func(i int) {
		u.Add(fmt.Sprintf(&quot;user_%d&quot;, i), i)
		gw.Done()
	}
	for i := 0; i &amp;lt; count; i++ {
		go add(i)
		go add(i)
	}
	for i := 0; i &amp;lt; count; i++ {
		go func(i int) {
			defer gw.Done()
			u.Get(fmt.Sprintf(&quot;user_%d&quot;, i))
			fmt.Print(&quot;.&quot;)
		}(i)
	}
	gw.Wait()
	fmt.Println(&quot;Done&quot;)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.
.
.
.
Done

Process finished with exit code 0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;9-ä¸‹é¢çš„è¿­ä»£ä¼šæœ‰ä»€ä¹ˆé—®é¢˜&quot;&gt;9. ä¸‹é¢çš„è¿­ä»£ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main

import &quot;fmt&quot;
import &quot;sync&quot;
import &quot;time&quot;

type ThreadSafeSet struct {
	sync.RWMutex
	s []int
}

func (set *ThreadSafeSet) Iter() &amp;lt;-chan interface{} {
	ch := make(chan interface{})
	go func() {
		set.RLock()

		for elem := range set.s {
			ch &amp;lt;- elem
			fmt.Print(&quot;get:&quot;, elem, &quot;,&quot;)
		}

		close(ch)
		set.RUnlock()

	}()
	return ch
}

func main() {
	//read()
	unRead()
}
func read() {
	set := ThreadSafeSet{}
	set.s = make([]int, 100)
	ch := set.Iter()
	closed := false
	for {
		select {
		case v, ok := &amp;lt;-ch:
			if ok {
				fmt.Print(&quot;read:&quot;, v, &quot;,&quot;)
			} else {
				closed = true
			}
		}
		if closed {
			fmt.Print(&quot;closed&quot;)
			break
		}
	}
	fmt.Print(&quot;Done&quot;)
}

func unRead() {
	set := ThreadSafeSet{}
	set.s = make([]int, 100)
	ch := set.Iter()
	_ = ch
	time.Sleep(5 * time.Second)
	fmt.Print(&quot;Done&quot;)
}

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;ç»“è®ºï¼š&lt;/strong&gt;å†…éƒ¨è¿­ä»£å‡ºç°é˜»å¡ã€‚é»˜è®¤åˆå§‹åŒ–æ—¶æ— ç¼“å†²åŒºï¼Œéœ€è¦ç­‰å¾…æ¥æ”¶è€…è¯»å–åæ‰èƒ½ç»§ç»­å†™å…¥ã€‚&lt;/p&gt;

&lt;p&gt;chanåœ¨ä½¿ç”¨makeåˆå§‹åŒ–æ—¶å¯é™„å¸¦ä¸€ä¸ªå¯é€‰å‚æ•°æ¥è®¾ç½®ç¼“å†²åŒºã€‚é»˜è®¤æ— ç¼“å†²ï¼Œé¢˜ç›®ä¸­ä¾¿åˆå§‹åŒ–çš„æ˜¯æ— ç¼“å†²åŒºçš„chanï¼Œè¿™æ ·åªæœ‰å†™å…¥çš„å…ƒç´ ç›´åˆ°è¢«è¯»å–åæ‰èƒ½ç»§ç»­å†™å…¥ï¼Œä¸ç„¶å°±ä¸€ç›´é˜»å¡ã€‚&lt;/p&gt;

&lt;p&gt;è®¾ç½®ç¼“å†²åŒºå¤§å°åï¼Œå†™å…¥æ•°æ®æ—¶å¯è¿ç»­å†™å…¥åˆ°ç¼“å†²åŒºä¸­ï¼Œç›´åˆ°ç¼“å†²åŒºè¢«å æ»¡ã€‚ä»chanä¸­æ¥æ”¶ä¸€æ¬¡ä¾¿å¯ä»ç¼“å†²åŒºä¸­é‡Šæ”¾ä¸€æ¬¡ã€‚å¯ä»¥ç†è§£ä¸ºchanæ˜¯å¯ä»¥è®¾ç½®ååé‡çš„å¤„ç†æ± ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ch := make(chan interface{}) &lt;/code&gt;å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;ch := make(chan interface{},1)&lt;/code&gt;æ˜¯ä¸ä¸€æ ·çš„
æ— ç¼“å†²çš„ ä¸ä»…ä»…æ˜¯åªèƒ½å‘ &lt;code class=&quot;highlighter-rouge&quot;&gt;ch&lt;/code&gt; é€šé“æ”¾ ä¸€ä¸ªå€¼ è€Œæ˜¯ä¸€ç›´è¦æœ‰äººæ¥æ”¶ï¼Œé‚£ä¹ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;ch &amp;lt;- elem&lt;/code&gt;æ‰ä¼šç»§ç»­ä¸‹å»ï¼Œè¦ä¸ç„¶å°±ä¸€ç›´é˜»å¡ç€ï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰æ¥æ”¶è€…æ‰å»æ”¾ï¼Œæ²¡æœ‰æ¥æ”¶è€…å°±é˜»å¡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;è€Œç¼“å†²ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;1&lt;/code&gt;åˆ™å³ä½¿æ²¡æœ‰æ¥æ”¶è€…ä¹Ÿä¸ä¼šé˜»å¡ï¼Œå› ä¸ºç¼“å†²å¤§å°æ˜¯&lt;code class=&quot;highlighter-rouge&quot;&gt;1&lt;/code&gt;åªæœ‰å½“ æ”¾ç¬¬äºŒä¸ªå€¼çš„æ—¶å€™ ç¬¬ä¸€ä¸ªè¿˜æ²¡è¢«äººæ‹¿èµ°ï¼Œè¿™æ—¶å€™æ‰ä¼šé˜»å¡&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;10-ä»¥ä¸‹ä»£ç èƒ½ç¼–è¯‘è¿‡å»å—ä¸ºä»€ä¹ˆ&quot;&gt;10. ä»¥ä¸‹ä»£ç èƒ½ç¼–è¯‘è¿‡å»å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main
import (
	&quot;fmt&quot;
)
type People interface {
	Speak(string) string
}
type Stduent struct{}
func (stu *Stduent) Speak(think string) (talk string) {
	if think == &quot;bitch&quot; {
		talk = &quot;You are a good boy&quot;
	} else {
		talk = &quot;hi&quot;
	}
	return
}
func main() {
	var peo People = Stduent{}
	think := &quot;bitch&quot;
	fmt.Println(peo.Speak(think))
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;ç»“è®ºï¼š&lt;/strong&gt;ç¼–è¯‘å¤±è´¥ï¼Œå€¼ç±»å‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;Student{}&lt;/code&gt; æœªå®ç°æ¥å£&lt;code class=&quot;highlighter-rouge&quot;&gt;People&lt;/code&gt;çš„æ–¹æ³•ï¼Œä¸èƒ½å®šä¹‰ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;People&lt;/code&gt; ç±»å‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸¤ç§æ­£ç¡®ä¿®æ”¹æ–¹æ³•ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;æ–¹æ³•ä¸€&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main
import (
	&quot;fmt&quot;
)
type People interface {
	Speak(string) string
}

type Stduent struct{}

func (stu Stduent) Speak(think string) (talk string) {
	if think == &quot;bitch&quot; {
		talk = &quot;You are a good boy&quot;
	} else {
		talk = &quot;hi&quot;
	}
	return
}
func main() {
	var peo People = Stduent{}
	think := &quot;hi&quot;
	fmt.Println(peo.Speak(think))
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;æ–¹æ³•äºŒ&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package main
import (
	&quot;fmt&quot;
)
type People interface {
	Speak(string) string
}

type Stduent struct{}

func (stu Stduent) Speak(think string) (talk string) {
	if think == &quot;bitch&quot; {
		talk = &quot;You are a good boy&quot;
	} else {
		talk = &quot;hi&quot;
	}
	return
}
func main() {
	var peo People = &amp;amp;Stduent{}
	think := &quot;bitch&quot;
	fmt.Println(peo.Speak(think))
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;æ€»ç»“ï¼š&lt;/strong&gt;æŒ‡é’ˆç±»å‹çš„ç»“æ„ä½“å¯¹è±¡å¯ä»¥åŒæ—¶è°ƒç”¨ç»“æ„ä½“å€¼ç±»å‹å’ŒæŒ‡é’ˆç±»å‹å¯¹åº”çš„æ–¹æ³•ã€‚è€Œå€¼ç±»å‹çš„ç»“æ„ä½“å¯¹è±¡åªèƒ½è°ƒç”¨å€¼ç±»å‹å¯¹åº”çš„æ¥å£æ–¹æ³•ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å…³æ³¨åŒºå—é“¾éƒ¨è½å®æ—¶è·å–æœ€æ–°æŠ€æœ¯æ–‡ç« &quot;&gt;å…³æ³¨åŒºå—é“¾éƒ¨è½ï¼Œå®æ—¶è·å–æœ€æ–°æŠ€æœ¯æ–‡ç« &lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://om1c35wrq.bkt.clouddn.com/%E5%8C%BA%E5%9D%97%E9%93%BE%E9%83%A8%E8%90%BD-1.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

</description>
        <pubDate>Tue, 24 Apr 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/04/24/golang-interview/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/04/24/golang-interview/</guid>
        
        <category>ç¬”è¯•é¢˜</category>
        
        
      </item>
    
  </channel>
</rss>
